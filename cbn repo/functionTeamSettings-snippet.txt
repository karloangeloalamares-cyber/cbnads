ement(\"span\", { className: \"text-sm text-gray-500\" }, \"You have unsaved changes\"))));\n  }\n\n  // virtual:/apps/web/src/components/TeamSettings.jsx\n  init_injected_globals();\n  var import_react65 = __toESM(require_react());\n  var import_lucide_react23 = __toESM(require_lucide_react());\n  function TeamSettings() {\n    const [members, setMembers] = (0, import_react65.useState)([]);\n    const [loading, setLoading] = (0, import_react65.useState)(true);\n    const [showAddModal, setShowAddModal] = (0, import_react65.useState)(false);\n    const [newMemberEmail, setNewMemberEmail] = (0, import_react65.useState)(\"\");\n    const [newMemberName, setNewMemberName] = (0, import_react65.useState)(\"\");\n    const [newMemberPassword, setNewMemberPassword] = (0, import_react65.useState)(\"\");\n    const [adding, setAdding] = (0, import_react65.useState)(false);\n    const [error, setError] = (0, import_react65.useState)(null);\n    const { modalState, showAlert, showConfirm } = useModal();\n    (0, import_react65.useEffect)(() =\u003e {\n      fetchMembers();\n    }, []);\n    const fetchMembers = async () =\u003e {\n      try {\n        const response = await fetch(\"/api/admin/members\");\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch members\");\n        }\n        const data = await response.json();\n        setMembers(data.members || []);\n      } catch (error2) {\n        console.error(\"Error fetching members:\", error2);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const handleAddMember = async (e) =\u003e {\n      e.preventDefault();\n      setAdding(true);\n      setError(null);\n      try {\n        const response = await fetch(\"/api/admin/members\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            email: newMemberEmail,\n            password: newMemberPassword,\n            name: newMemberName,\n            role: \"admin\"\n          })\n        });\n        if (!response.ok) {\n          const data = await response.json();\n          throw new Error(data.error || \"Failed to add member\");\n        }\n        setNewMemberEmail(\"\");\n        setNewMemberName(\"\");\n        setNewMemberPassword(\"\");\n        setShowAddModal(false);\n        fetchMembers();\n      } catch (error2) {\n        console.error(\"Error adding member:\", error2);\n        setError(error2.message);\n      } finally {\n        setAdding(false);\n      }\n    };\n    const handleRemoveMember = async (memberId) =\u003e {\n      const confirmed = await showConfirm({\n        title: \"Remove Team Member\",\n        message: \"Are you sure you want to remove this team member?\",\n        confirmText: \"Remove\",\n        cancelText: \"Cancel\",\n        variant: \"danger\"\n      });\n      if (!confirmed) return;\n      try {\n        const response = await fetch(`/api/admin/members/${memberId}`, {\n          method: \"DELETE\"\n        });\n        if (!response.ok) {\n          throw new Error(\"Failed to remove member\");\n        }\n        fetchMembers();\n      } catch (error2) {\n        console.error(\"Error removing member:\", error2);\n        await showAlert({\n          title: \"Error\",\n          message: \"Failed to remove member. Please try again.\",\n          variant: \"danger\"\n        });\n      }\n    };\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200 p-6\" }, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-600\" }, \"Loading team members...\"));\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, modalState.type === \"alert\" \u0026\u0026 /* @__PURE__ */ React.createElement(AlertModal, { ...modalState.props, isOpen: modalState.isOpen }), modalState.type === \"confirm\" \u0026\u0026 /* @__PURE__ */ React.createElement(ConfirmModal, { ...modalState.props, isOpen: modalState.isOpen }), /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-200 flex items-center justify-between\" }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-lg font-semibold text-gray-900\" }, \"Team Members\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-gray-500 mt-1\" }, \"Manage who has access to your ads manager\")), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: () =\u003e setShowAddModal(true),\n        className: \"flex items-center gap-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium\"\n      },\n      /* @__PURE__ */ React.createElement(import_lucide_react23.Plus, { size: 16 }),\n      \"Add Member\"\n    )), /* @__PURE__ */ React.createElement(\"div\", { className: \"divide-y divide-gray-200\" }, members.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 text-center text-gray-500\" }, /* @__PURE__ */ React.createElement(\"p\", null, \"No team members yet. Add your first member to get started.\")) : members.map((member) =\u003e /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        key: member.id,\n        className: \"p-6 flex items-center justify-between hover:bg-gray-50 transition-colors\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center\" }, member.image ? /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: member.image,\n          alt: member.name,\n          className: \"w-full h-full rounded-full object-cover\"\n        }\n      ) : /* @__PURE__ */ React.createElement(import_lucide_react23.User, { size: 20, className: \"text-gray-500\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm font-medium text-gray-900\" }, member.name || \"No name\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-gray-500\" }, member.email))),\n      /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full\" }, member.role === \"admin\" \u0026\u0026 /* @__PURE__ */ React.createElement(import_lucide_react23.Crown, { size: 14, className: \"text-yellow-600\" }), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-medium text-gray-700 capitalize\" }, member.role)), /* @__PURE__ */ React.createElement(\n        \"button\",\n        {\n          onClick: () =\u003e handleRemoveMember(member.id),\n          className: \"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n        },\n        /* @__PURE__ */ React.createElement(import_lucide_react23.X, { size: 16 })\n      ))\n    ))), showAddModal \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-2xl max-w-md w-full p-6\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-semibold text-gray-900 mb-4\" }, \"Add Team Member\"), /* @__PURE__ */ React.createElement(\"form\", { onSubmit: handleAddMember, className: \"space-y-4\" }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Full Name\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"text\",\n        value: newMemberName,\n        onChange: (e) =\u003e setNewMemberName(e.target.value),\n        placeholder: \"John Doe\",\n        className: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\",\n        required: true\n      }\n    )), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Email Address\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"email\",\n        value: newMemberEmail,\n        onChange: (e) =\u003e setNewMemberEmail(e.target.value),\n        placeholder: \"member@example.com\",\n        className: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\",\n        required: true\n      }\n    )), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Password\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"password\",\n        value: newMemberPassword,\n        onChange: (e) =\u003e setNewMemberPassword(e.target.value),\n        placeholder: \"Create a secure password\",\n        className: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\",\n        required: true,\n        minLength: 6\n      }\n    ), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xs text-gray-500 mt-2\" }, \"This will create a new admin account with these credentials.\")), error \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"rounded-lg bg-red-50 border border-red-200 p-3 text-sm text-red-600\" }, error), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-3\" }, /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        type: \"button\",\n        onClick: () =\u003e {\n          setShowAddModal(false);\n          setNewMemberEmail(\"\");\n          setNewMemberName(\"\");\n          setNewMemberPassword(\"\");\n          setError(null);\n        },\n        className: \"flex-1 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\n      },\n      \"Cancel\"\n    ), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        type: \"submit\",\n        disabled: adding,\n        className: \"flex-1 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium disabled:opacity-50\"\n      },\n      adding ? \"Adding...\" : \"Add Member\"\n    )))))));\n  }\n\n  // virtual:/apps/web/src/components/NotificationSettings.jsx\n  init_injected_globals();\n  var import_react66 = __toESM(require_react());\n  var import_lucide_react24 = __toESM(require_lucide_react());\n  function NotificationSettings() {\n    const [loading, setLoading] = (0, import_react66.useState)(true);\n    const [saving, setSaving] = (0, import_react66.useState)(false);\n    const [sendingTest, setSendingTest] = (0, import_react66.useState)(false);\n    const [checkingReminders, setCheckingReminders] = (0, import_react66.useState)(false);\n    const [testMessage, setTestMessage] = (0, import_react66.useState)(null);\n    const [reminderResults, setReminderResults] = (0, import_react66.useState)(null);\n    const [settingUpWebhook, setSettingUpWebhook] = (0, import_react66.useState)(false);\n    const [webhookStatus, setWebhookStatus] = (0, import_react66.useState)(null);\n    const [preferences, setPreferences] = (0, import_react66.useState)({\n      email_enabled: true,\n      sms_enabled: false,\n      telegram_enabled: false,\n      reminder_time_value: 1,\n      reminder_time_unit: \"hours\",\n      email_address: \"\",\n      phone_number: \"\",\n      sound_enabled: true\n    });\n    const [chatIds, setChatIds] = (0, import_react66.useState)([]);\n    const [loadingChatIds, setLoadingChatIds] = (0, import_react66.useState)(true);\n    const [newLabel, setNewLabel] = (0, import_react66.useState)(\"\");\n    const [newChatId, setNewChatId] = (0, import_react66.useState)(\"\");\n    const [addingChatId, setAddingChatId] = (0, import_react66.useState)(false);\n    const [sendingTestTelegram, setSendingTestTelegram] = (0, import_react66.useState)(null);\n    (0, import_react66.useEffect)(() =\u003e {\n      fetchPreferences();\n      fetchChatIds();\n    }, []);\n    const fetchPreferences = async () =\u003e {\n      try {\n        const response = await fetch(\"/api/admin/notification-preferences\");\n        if (!response.ok) throw new Error(\"Failed to fetch preferences\");\n        const data = await response.json();\n        setPreferences(data.preferences);\n      } catch (err) {\n        console.error(\"Error fetching preferences:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const fetchChatIds = async () =\u003e {\n      try {\n        const response = await fetch(\"/api/admin/telegram-chat-ids\");\n        if (!response.ok) throw new Error(\"Failed to fetch chat IDs\");\n        const data = await response.json();\n        setChatIds(data.chatIds || []);\n      } catch (err) {\n        console.error(\"Error fetching chat IDs:\", err);\n      } finally {\n        setLoadingChatIds(false);\n      }\n    };\n    const handleAddChatId = async () =\u003e {\n      if (!newLabel.trim() || !newChatId.trim()) return;\n      setAddingChatId(true);\n      try {\n        const response = await fetch(\"/api/admin/telegram-chat-ids\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            label: newLabel.trim(),\n            chat_id: newChatId.trim()\n          })\n        });\n        if (!response.ok) throw new Error(\"Failed to add chat ID\");\n        const data = await response.json();\n        setChatIds((prev) =\u003e [...prev, data.chatId]);\n        setNewLabel(\"\");\n        setNewChatId(\"\");\n      } catch (err) {\n        console.error(\"Error adding chat ID:\", err);\n        setTestMessage({ type: \"error\", text: \"Failed to add Telegram chat ID\" });\n      } finally {\n        setAddingChatId(false);\n      }\n    };\n    const handleToggleChatId = async (id, currentActive) =\u003e {\n      try {\n        const response = await fetch(\"/api/admin/telegram-chat-ids\", {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ id, is_active: !currentActive })\n        });\n        if (!response.ok) throw new Error(\"Failed to toggle\");\n        setChatIds(\n          (prev) =\u003e prev.map(\n            (c) =\u003e c.id === id ? { ...c, is_active: !currentActive } : c\n          )\n        );\n      } catch (err) {\n        console.error(\"Error toggling chat ID:\", err);\n      }\n    };\n    const handleDeleteChatId = async (id) =\u003e {\n      try {\n        const response = await fetch(`/api/admin/telegram-chat-ids?id=${id}`, {\n          method: \"DELETE\"\n        });\n        if (!response.ok) throw new Error(\"Failed to delete\");\n        setChatIds((prev) =\u003e prev.filter((c) =\u003e c.id !== id));\n      } catch (err) {\n        console.error(\"Error deleting chat ID:\", err);\n      }\n    };\n    const handleTestTelegram = async (chatId, label) =\u003e {\n      setSendingTestTelegram(chatId);\n      try {\n        const response = await fetch(\"/api/telegram/send\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            chatId,\n            text: \"\\u2705 Test message from CBN Ads Manager! Telegram notifications are working.\"\n          })\n        });\n        const data = await response.json();\n        if (!response.ok) throw new Error(data.error || \"Failed to send test\");\n        setTestMessage({\n          type: \"success\",\n          text: `Test message sent to \"${label}\"!`\n        });\n      } catch (err) {\n        setTestMessage({\n          type: \"error\",\n          text: `Failed to send to \"${label}\": ${err.message}`\n        });\n      } finally {\n        setSendingTestTelegram(null);\n      }\n    };\n    const handleSetupWebhook = async () =\u003e {\n      setSettingUpWebhook(true);\n      setWebhookStatus(null);\n      try {\n        const response = await fetch(\"/api/telegram/setup-webhook\", {\n          method: \"POST\"\n        });\n        const data = await response.json();\n        if (!response.ok)\n          throw new Error(data.error || \"Failed to setup webhook\");\n        setWebhookStatus({\n          type: \"success\",\n          text: \"Telegram webhook registered! Approve/Reject buttons will now work in Telegram.\"\n        });\n      } catch (err) {\n        console.error(\"Error setting up webhook:\", err);\n        setWebhookStatus({\n          type: \"error\",\n          text: `Failed to setup webhook: ${err.message}`\n        });\n      } finally {\n        setSettingUpWebhook(false);\n      }\n    };\n    const handleSave = async () =\u003e {\n      setSaving(true);\n      setTestMessage(null);\n      try {\n        const response = await fetch(\"/api/admin/notification-preferences\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(preferences)\n        });\n        if (!response.ok) throw new Error(\"Failed to save preferences\");\n        setTestMessage({\n          type: \"success\",\n          text: \"Notification preferences saved successfully!\"\n        });\n      } catch (err) {\n        console.error(\"Error saving preferences:\", err);\n        setTestMessage({\n          type: \"error\",\n          text: \"Failed to save preferences. Please try again.\"\n        });\n      } finally {\n        setSaving(false);\n      }\n    };\n    const handleSendTestEmail = async () =\u003e {\n      if (!preferences.email_address) {\n        setTestMessage({\n          type: \"error\",\n          text: \"Please enter an email address first\"\n        });\n        return;\n      }\n      setSendingTest(true);\n      setTestMessage(null);\n      try {\n        const response = await fetch(\"/api/admin/send-test-email\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ email: preferences.email_address })\n        });\n        const data = await response.json();\n        if (!response.ok)\n          throw new Error(data.error || \"Failed to send test email\");\n        setTestMessage({\n          type: \"success\",\n          text: `Test email sent to ${preferences.email_address}! Check your inbox.`\n        });\n      } catch (err) {\n        console.error(\"Error sending test email:\", err);\n        setTestMessage({\n          type: \"error\",\n          text: err.message || \"Failed to send test email. Please check your API key.\"\n        });\n      } finally {\n        setSendingTest(false);\n      }\n    };\n    const handleCheckReminders = async () =\u003e {\n      setCheckingReminders(true);\n      setReminderResults(null);\n      setTestMessage(null);\n      try {\n        const response = await fetch(\"/api/admin/send-reminders\", {\n          method: \"POST\"\n        });\n        const data = await response.json();\n        if (!response.ok)\n          throw new Error(data.error || \"Failed to check reminders\");\n        setReminderResults(data);\n        if (data.totalResults === 0) {\n          setTestMessage({\n            type: \"info\",\n            text: \"No reminders due at this time. Check console logs for details.\"\n          });\n        } else {\n          setTestMessage({\n            type: \"success\",\n            text: `Processed ${data.totalResults} reminder(s). See results below.`\n          });\n        }\n      } catch (err) {\n        console.error(\"Error checking reminders:\", err);\n        setTestMessage({\n          type: \"error\",\n          text: err.message || \"Failed to check reminders.\"\n        });\n      } finally {\n        setCheckingReminders(false);\n      }\n    };\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200 p-6\" }, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-600\" }, \"Loading preferences...\"));\n    }\n    const activeChatCount = chatIds.filter((c) =\u003e c.is_active).length;\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"space-y-6\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-200\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3 mb-2\" }, /* @__PURE__ */ React.createElement(import_lucide_react24.Bell, { size: 20, className: \"text-gray-700\" }), /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-lg font-semibold text-gray-900\" }, \"Reminder Timing\")), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-gray-500\" }, \"Set when you want to be notified before an ad is due\")), /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-3\" }, \"Notify me\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"number\",\n        min: \"1\",\n        value: preferences.reminder_time_value,\n        onChange: (e) =\u003e setPreferences({\n          ...prefer
