!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8613ea6d-0ac4-43bb-a421-05cb0f82b37e",e._sentryDebugIdIdentifier="sentry-dbid-8613ea6d-0ac4-43bb-a421-05cb0f82b37e")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6148],{39219:function(e){"use strict";var t,r,n,o,i,a=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&f(e,r,t[r]);if(d)for(var r of d(t))v.call(t,r)&&f(e,r,t[r]);return e},p=(e,t)=>s(e,u(t)),m=(e,t,r)=>new Promise((n,o)=>{var i=e=>{try{s(r.next(e))}catch(e){o(e)}},a=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}),E={};((e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})})(E,{AggregateError:()=>L,AllProviderEvents:()=>Y,AllProviderStatus:()=>I,BaseComparisonStrategy:()=>G,BaseEvaluationStrategy:()=>V,BaseFirstMatchStrategy:()=>M,BaseFirstSuccessfulStrategy:()=>U,ClientProviderEvents:()=>Y,ClientProviderStatus:()=>I,DefaultLogger:()=>K,ErrorCode:()=>b,ErrorWithCode:()=>N,FlagNotFoundError:()=>_,GeneralError:()=>P,GenericEventEmitter:()=>X,InvalidContextError:()=>w,LOG_LEVELS:()=>W,MapHookData:()=>y,OpenFeatureCommonAPI:()=>ea,OpenFeatureError:()=>R,ParseError:()=>C,ProviderFatalError:()=>k,ProviderNotReadyError:()=>A,ProviderWrapper:()=>ei,SafeLogger:()=>q,ServerProviderEvents:()=>$,ServerProviderStatus:()=>T,StandardResolutionReasons:()=>O,StatusTracker:()=>H,TargetingKeyMissingError:()=>D,TelemetryAttribute:()=>J,TelemetryFlagMetadata:()=>Q,TypeMismatchError:()=>S,constructAggregateError:()=>j,createEvaluationEvent:()=>Z,instantiateErrorByErrorCode:()=>x,isObject:()=>er,isString:()=>ee,objectOrUndefined:()=>en,statusMatchesEvent:()=>B,stringOrUndefined:()=>et,throwAggregateErrorFromPromiseResults:()=>F}),e.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of c(t))h.call(e,o)||o===r||a(e,o,{get:()=>t[o],enumerable:!(n=l(t,o))||n.enumerable});return e})(a({},"__esModule",{value:!0}),E);var y=class{constructor(){this.data=new Map}set(e,t){this.data.set(e,t)}get(e){return this.data.get(e)}has(e){return this.data.has(e)}delete(e){return this.data.delete(e)}clear(){this.data.clear()}},O={STATIC:"STATIC",DEFAULT:"DEFAULT",TARGETING_MATCH:"TARGETING_MATCH",SPLIT:"SPLIT",CACHED:"CACHED",DISABLED:"DISABLED",UNKNOWN:"UNKNOWN",STALE:"STALE",ERROR:"ERROR"},b=((t=b||{}).PROVIDER_NOT_READY="PROVIDER_NOT_READY",t.PROVIDER_FATAL="PROVIDER_FATAL",t.FLAG_NOT_FOUND="FLAG_NOT_FOUND",t.PARSE_ERROR="PARSE_ERROR",t.TYPE_MISMATCH="TYPE_MISMATCH",t.TARGETING_KEY_MISSING="TARGETING_KEY_MISSING",t.INVALID_CONTEXT="INVALID_CONTEXT",t.GENERAL="GENERAL",t),R=class e extends Error{constructor(t,r){super(t),Object.setPrototypeOf(this,e.prototype),this.name="OpenFeatureError",this.cause=null==r?void 0:r.cause}},_=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="FlagNotFoundError",this.code="FLAG_NOT_FOUND"}},P=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="GeneralError",this.code="GENERAL"}},w=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="InvalidContextError",this.code="INVALID_CONTEXT"}},C=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ParseError",this.code="PARSE_ERROR"}},k=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderFatalError",this.code="PROVIDER_FATAL"}},A=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderNotReadyError",this.code="PROVIDER_NOT_READY"}},D=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TargetingKeyMissingError",this.code="TARGETING_KEY_MISSING"}},S=class e extends R{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TypeMismatchError",this.code="TYPE_MISMATCH"}},x=(e,t)=>{switch(e){case"FLAG_NOT_FOUND":return new _(t);case"PARSE_ERROR":return new C(t);case"TYPE_MISMATCH":return new S(t);case"TARGETING_KEY_MISSING":return new D(t);case"INVALID_CONTEXT":return new w(t);case"PROVIDER_NOT_READY":return new A(t);case"PROVIDER_FATAL":return new k(t);default:return new P(t)}},T=((r=T||{}).NOT_READY="NOT_READY",r.READY="READY",r.ERROR="ERROR",r.STALE="STALE",r.FATAL="FATAL",r),I=((n=I||{}).NOT_READY="NOT_READY",n.READY="READY",n.ERROR="ERROR",n.STALE="STALE",n.FATAL="FATAL",n.RECONCILING="RECONCILING",n),N=class extends R{constructor(e,t){super(t),this.code=e}},L=class e extends P{constructor(t,r){super(t),this.originalErrors=r,Object.setPrototypeOf(this,e.prototype),this.name="AggregateError"}},j=e=>{let t=e.map(({providerName:e,error:t})=>({source:e,error:t})).flat(),r=t[0];return new L(r?`Provider errors occurred: ${r.source}: ${r.error}`:"Provider errors occurred",t)},F=(e,t)=>{let r=e.map((e,r)=>"rejected"===e.status?{error:e.reason,providerName:t[r].name}:null).filter(e=>!!e);if(r.length)throw j(r)},H=class{constructor(e,t,r){this.events=e,this.statusEnum=t,this.eventEnum=r,this.providerStatuses={}}wrapEventHandler(e){var t,r,n,o,i;let a=e.provider;null==(t=a.events)||t.addHandler(this.eventEnum.Error,t=>{this.changeProviderStatus(e.name,this.statusEnum.ERROR,t)}),null==(r=a.events)||r.addHandler(this.eventEnum.Stale,t=>{this.changeProviderStatus(e.name,this.statusEnum.STALE,t)}),null==(n=a.events)||n.addHandler(this.eventEnum.ConfigurationChanged,e=>{this.events.emit(this.eventEnum.ConfigurationChanged,e)}),null==(o=a.events)||o.addHandler(this.eventEnum.Ready,t=>{this.changeProviderStatus(e.name,this.statusEnum.READY,t)});let s=this.eventEnum.Reconciling,l=this.statusEnum.RECONCILING;s&&l&&(null==(i=a.events)||i.addHandler(s,t=>{this.changeProviderStatus(e.name,l,t)}))}providerStatus(e){return this.providerStatuses[e]}getStatusFromProviderStatuses(){let e=Object.values(this.providerStatuses);return e.includes(this.statusEnum.FATAL)?this.statusEnum.FATAL:e.includes(this.statusEnum.NOT_READY)?this.statusEnum.NOT_READY:e.includes(this.statusEnum.ERROR)?this.statusEnum.ERROR:e.includes(this.statusEnum.STALE)?this.statusEnum.STALE:this.statusEnum.RECONCILING&&e.includes(this.statusEnum.RECONCILING)?this.statusEnum.RECONCILING:this.statusEnum.READY}changeProviderStatus(e,t,r){let n=this.getStatusFromProviderStatuses();this.providerStatuses[e]=t;let o=this.getStatusFromProviderStatuses();if(n!==o){if(o===this.statusEnum.FATAL||o===this.statusEnum.ERROR)this.events.emit(this.eventEnum.Error,r);else if(o===this.statusEnum.STALE)this.events.emit(this.eventEnum.Stale,r);else if(o===this.statusEnum.READY)this.events.emit(this.eventEnum.Ready,r);else{let e=this.eventEnum.Reconciling;e&&this.statusEnum.RECONCILING&&o===this.statusEnum.RECONCILING&&this.events.emit(e,r)}}}},V=class{constructor(e){this.statusEnum=e,this.runMode="sequential"}shouldEvaluateThisProvider(e,t){return e.providerStatus!==this.statusEnum.NOT_READY&&e.providerStatus!==this.statusEnum.FATAL}shouldEvaluateNextProvider(e,t,r){return!0}shouldTrackWithThisProvider(e,t,r,n){return e.providerStatus!==this.statusEnum.NOT_READY&&e.providerStatus!==this.statusEnum.FATAL}hasError(e){return"thrownError"in e||!!e.details.errorCode}hasErrorWithCode(e,t){var r;return"thrownError"in e?(null==(r=e.thrownError)?void 0:r.code)===t:e.details.errorCode===t}collectProviderErrors(e){var t;let r=[];for(let n of e)"thrownError"in n?r.push({providerName:n.providerName,error:n.thrownError}):n.details.errorCode&&r.push({providerName:n.providerName,error:new N(n.details.errorCode,null!=(t=n.details.errorMessage)?t:"unknown error")});return{errors:r}}resolutionToFinalResult(e){return{details:e.details,provider:e.provider,providerName:e.providerName}}},M=class extends V{shouldEvaluateNextProvider(e,t,r){return!!this.hasErrorWithCode(r,"FLAG_NOT_FOUND")||(this.hasError(r),!1)}determineFinalResult(e,t,r){let n=r[r.length-1];return this.hasError(n)?this.collectProviderErrors(r):this.resolutionToFinalResult(n)}},U=class extends V{shouldEvaluateNextProvider(e,t,r){return this.hasError(r)}determineFinalResult(e,t,r){let n=r[r.length-1];return this.hasError(n)?this.collectProviderErrors(r):this.resolutionToFinalResult(n)}},G=class extends V{constructor(e,t,r){super(e),this.fallbackProvider=t,this.onMismatch=r,this.runMode="parallel"}determineFinalResult(e,t,r){var n;let o,i,a;let s=!1;for(let[e,t]of r.entries()){if(this.hasError(t))return this.collectProviderErrors(r);t.provider===this.fallbackProvider&&(i=t),0===e&&(a=t),void 0!==o&&o!==t.details.value?s=!0:o=t.details.value}if(!i)throw new P("Fallback provider not found in resolution results");if(!a)throw new P("Final resolution not found in resolution results");return s?(null==(n=this.onMismatch)||n.call(this,r),{details:i.details,provider:i.provider}):this.resolutionToFinalResult(a)}},$=((o=$||{}).Ready="PROVIDER_READY",o.Error="PROVIDER_ERROR",o.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",o.Stale="PROVIDER_STALE",o),Y=((i=Y||{}).Ready="PROVIDER_READY",i.Error="PROVIDER_ERROR",i.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",i.ContextChanged="PROVIDER_CONTEXT_CHANGED",i.Reconciling="PROVIDER_RECONCILING",i.Stale="PROVIDER_STALE",i),z={READY:"PROVIDER_READY",ERROR:"PROVIDER_ERROR",FATAL:"PROVIDER_ERROR",STALE:"PROVIDER_STALE",RECONCILING:"PROVIDER_RECONCILING",NOT_READY:void 0},B=(e,t)=>!t&&"PROVIDER_READY"===e||z[t]===e,K=class{error(...e){console.error(...e)}warn(...e){console.warn(...e)}info(){}debug(){}},W=["error","warn","info","debug"],q=class{constructor(e){this.fallbackLogger=new K;try{for(let t of W)if(!e[t]||"function"!=typeof e[t])throw Error(`The provided logger is missing the ${t} method.`);this.logger=e}catch(e){console.error(e),console.error("Falling back to the default logger."),this.logger=this.fallbackLogger}}error(...e){this.log("error",...e)}warn(...e){this.log("warn",...e)}info(...e){this.log("info",...e)}debug(...e){this.log("debug",...e)}log(e,...t){try{this.logger[e](...t)}catch(r){this.fallbackLogger[e](...t)}}},X=class{constructor(e){this.globalLogger=e,this._handlers={PROVIDER_CONFIGURATION_CHANGED:new WeakMap,PROVIDER_CONTEXT_CHANGED:new WeakMap,PROVIDER_READY:new WeakMap,PROVIDER_ERROR:new WeakMap,PROVIDER_STALE:new WeakMap,PROVIDER_RECONCILING:new WeakMap}}emit(e,t){this.eventEmitter.emit(e,t)}addHandler(e,t){let r=e=>m(this,null,function*(){var r;try{yield t(e)}catch(e){null==(r=this._logger)||r.error("Error running event handler:",e)}}),n=this._handlers[e].get(t);this._handlers[e].set(t,[...n||[],r]),this.eventEmitter.on(e,r)}removeHandler(e,t){let r=this._handlers[e].get(t);if(r){let t=r.pop();t&&this.eventEmitter.removeListener(e,t)}}removeAllHandlers(e){e?this.eventEmitter.removeAllListeners(e):this.eventEmitter.removeAllListeners()}getHandlers(e){return this.eventEmitter.listeners(e)}setLogger(e){return this._eventLogger=new q(e),this}get _logger(){var e,t;return null!=(t=this._eventLogger)?t:null==(e=this.globalLogger)?void 0:e.call(this)}},J={KEY:"feature_flag.key",ERROR_CODE:"error.type",ERROR_MESSAGE:"error.message",VARIANT:"feature_flag.result.variant",VALUE:"feature_flag.result.value",CONTEXT_ID:"feature_flag.context.id",REASON:"feature_flag.result.reason",PROVIDER:"feature_flag.provider.name",FLAG_SET_ID:"feature_flag.set.id",VERSION:"feature_flag.version"},Q={CONTEXT_ID:"contextId",FLAG_SET_ID:"flagSetId",VERSION:"version"};function Z(e,t){var r,n,o;let i={[J.KEY]:e.flagKey,[J.PROVIDER]:e.providerMetadata.name,[J.REASON]:(null!=(r=t.reason)?r:O.UNKNOWN).toLowerCase()};if(t.variant&&(i[J.VARIANT]=t.variant),null!==t.value){if("object"!=typeof t.value)i[J.VALUE]=t.value;else try{i[J.VALUE]=JSON.stringify(t.value)}catch(e){}}let a=null!=(n=t.flagMetadata[Q.CONTEXT_ID])?n:e.context.targetingKey;a&&(i[J.CONTEXT_ID]=a);let s=t.flagMetadata[Q.FLAG_SET_ID];s&&(i[J.FLAG_SET_ID]=s);let l=t.flagMetadata[Q.VERSION];return l&&(i[J.VERSION]=l),t.reason===O.ERROR&&(i[J.ERROR_CODE]=(null!=(o=t.errorCode)?o:"GENERAL").toLowerCase(),t.errorMessage&&(i[J.ERROR_MESSAGE]=t.errorMessage)),{name:"feature_flag.evaluation",attributes:i}}function ee(e){return"string"==typeof e}function et(e){return ee(e)?e:void 0}function er(e){return"object"==typeof e}function en(e){return er(e)?e:void 0}function eo(e){return null!=e}var ei=class{constructor(e,t,r){var n,o,i;this._provider=e,this._status=t,this._pendingContextChanges=0,null==(n=e.events)||n.addHandler("PROVIDER_READY",()=>{this._status=r.READY}),null==(o=e.events)||o.addHandler("PROVIDER_STALE",()=>{this._status=r.STALE}),null==(i=e.events)||i.addHandler("PROVIDER_ERROR",e=>{(null==e?void 0:e.errorCode)==="PROVIDER_FATAL"?this._status=r.FATAL:this._status=r.ERROR})}get provider(){return this._provider}set provider(e){this._provider=e}get status(){return this._status}set status(e){this._status=e}get allContextChangesSettled(){return 0===this._pendingContextChanges}incrementPendingContextChanges(){this._pendingContextChanges++}decrementPendingContextChanges(){this._pendingContextChanges--}},ea=class{constructor(e){this._hooks=[],this._context={},this._logger=new K,this._clientEventHandlers=new Map,this._domainScopedContext=new Map,this._clientEvents=new Map,this._runsOn=e}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}setLogger(e){return this._logger=new q(e),this}get providerMetadata(){return this.getProviderMetadata()}getProviderMetadata(e){return this.getProviderForClient(e).metadata}addHandler(e,t,r){[...new Map([[void 0,this._defaultProvider]]),...this._domainScopedProviders].forEach(r=>{var n;let o=r[0],i=r[1].provider;if(B(e,r[1].status))try{t({domain:o,providerName:i.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}}),this._apiEmitter.addHandler(e,t),(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this._apiEmitter.removeHandler(e,t)}clearHandlers(){this._apiEmitter.removeAllHandlers()}getHandlers(e){return this._apiEmitter.getHandlers(e)}setAwaitableProvider(e,t){var r,n,o,i,a,s,l,u;let c;let d=et(e),h=null!=(r=en(e))?r:en(t);if(!h){this._logger.debug("No provider defined, ignoring setProvider call");return}let v=this.getProviderForClient(d),f=h.metadata.name;if(v===h){this._logger.debug("Provider is already set, ignoring setProvider call");return}if(h.runsOn){if(h.runsOn!==this._runsOn)throw new P(`Provider '${h.metadata.name}' is intended for use on the ${h.runsOn}.`)}else this._logger.debug(`Provider '${h.metadata.name}' has not defined its intended use.`);let g=this.getAssociatedEventEmitters(d),p=new ei(h,this._statusEnumType.NOT_READY,this._statusEnumType);return"function"!=typeof h.initialize||this.allProviders.includes(h)?(p.status=this._statusEnumType.READY,g.forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})}),null==(s=this._apiEmitter)||s.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})):c=null==(a=null==(i=null==(o=h.initialize)?void 0:o.call(h,d&&null!=(n=this._domainScopedContext.get(d))?n:this._context))?void 0:i.then(()=>{var e;p.status=this._statusEnumType.READY,this.getAssociatedEventEmitters(d).forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})}),null==(e=this._apiEmitter)||e.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})}))?void 0:a.catch(e=>{var t;throw(null==e?void 0:e.code)==="PROVIDER_FATAL"?p.status=this._statusEnumType.FATAL:p.status=this._statusEnumType.ERROR,this.getAssociatedEventEmitters(d).forEach(t=>{null==t||t.emit("PROVIDER_ERROR",{clientName:d,domain:d,providerName:f,message:null==e?void 0:e.message})}),null==(t=this._apiEmitter)||t.emit("PROVIDER_ERROR",{clientName:d,domain:d,providerName:f,message:null==e?void 0:e.message}),e}),d?this._domainScopedProviders.set(d,p):this._defaultProvider=p,this.transferListeners(v,h,d,g),this.allProviders.includes(v)||null==(u=null==(l=null==v?void 0:v.onClose)?void 0:l.call(v))||u.catch(e=>{this._logger.error(`error closing provider: ${null==e?void 0:e.message}, ${null==e?void 0:e.stack}`)}),c}getProviderForClient(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.provider)?r:this._defaultProvider.provider}buildAndCacheEventEmitterForClient(e){let t=this._clientEvents.get(e);if(t)return t;let r=this._createEventEmitter();this._clientEvents.set(e,r);let n=this.getProviderForClient(e);return Object.values(Y).forEach(t=>{var o;return null==(o=n.events)?void 0:o.addHandler(t,o=>m(this,null,function*(){r.emit(t,p(g({},o),{clientName:e,domain:e,providerName:n.metadata.name}))}))}),r}getUnboundEmitters(){let e=[...this._domainScopedProviders.keys()];return[...[...this._clientEvents.keys()].filter(eo).filter(t=>!e.includes(t)).map(e=>this._clientEvents.get(e)),this._clientEvents.get(void 0)].filter(eo)}getAssociatedEventEmitters(e){return e?[this.buildAndCacheEventEmitterForClient(e)]:this.getUnboundEmitters()}transferListeners(e,t,r,n){var o;null==(o=this._clientEventHandlers.get(r))||o.forEach(t=>{var r;return null==(r=e.events)?void 0:r.removeHandler(...t)});let i=Object.values(Y).map(e=>[e,o=>m(this,null,function*(){n.forEach(n=>{null==n||n.emit(e,p(g({},o),{clientName:r,domain:r,providerName:t.metadata.name}))}),this._apiEmitter.emit(e,p(g({},o),{clientName:r,domain:r,providerName:t.metadata.name}))})]);this._clientEventHandlers.set(r,i),i.forEach(e=>{var r;return null==(r=t.events)?void 0:r.addHandler(...e)})}close(){return m(this,null,function*(){var e,t;try{yield null==(t=null==(e=this==null?void 0:this._defaultProvider.provider)?void 0:e.onClose)?void 0:t.call(e)}catch(e){this.handleShutdownError(this._defaultProvider.provider,e)}let r=Array.from(this._domainScopedProviders);yield Promise.all(r.map(e=>m(this,[e],function*([,e]){var t,r;try{yield null==(r=null==e?void 0:(t=e.provider).onClose)?void 0:r.call(t)}catch(t){this.handleShutdownError(null==e?void 0:e.provider,t)}})))})}clearProvidersAndSetDefault(e){return m(this,null,function*(){try{yield this.close()}catch(e){this._logger.error("Unable to cleanly close providers. Resetting to the default configuration.")}finally{this._domainScopedProviders.clear(),this._defaultProvider=new ei(e,this._statusEnumType.NOT_READY,this._statusEnumType)}})}get allProviders(){return[...[...this._domainScopedProviders.values()].map(e=>e.provider),this._defaultProvider.provider]}handleShutdownError(e,t){this._logger.error(`Error during shutdown of provider ${e.metadata.name}: ${t}`),this._logger.error(null==t?void 0:t.stack)}}},85447:function(e,t,r){"use strict";let n,o,i;r.r(t),r.d(t,{LaunchDarklyClientProvider:function(){return ek}});var a,s,l,u,c,d=Object.defineProperty,h=Object.defineProperties,v=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&m(e,r,t[r]);if(f)for(var r of f(t))p.call(t,r)&&m(e,r,t[r]);return e},y=(e,t)=>h(e,v(t)),O=(e,t,r)=>new Promise((n,o)=>{var i=e=>{try{s(r.next(e))}catch(e){o(e)}},a=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}),b=class{constructor(){this.data=new Map}set(e,t){this.data.set(e,t)}get(e){return this.data.get(e)}has(e){return this.data.has(e)}delete(e){return this.data.delete(e)}clear(){this.data.clear()}},R="ERROR",_=((a=_||{}).PROVIDER_NOT_READY="PROVIDER_NOT_READY",a.PROVIDER_FATAL="PROVIDER_FATAL",a.FLAG_NOT_FOUND="FLAG_NOT_FOUND",a.PARSE_ERROR="PARSE_ERROR",a.TYPE_MISMATCH="TYPE_MISMATCH",a.TARGETING_KEY_MISSING="TARGETING_KEY_MISSING",a.INVALID_CONTEXT="INVALID_CONTEXT",a.GENERAL="GENERAL",a),P=class e extends Error{constructor(t,r){super(t),Object.setPrototypeOf(this,e.prototype),this.name="OpenFeatureError",this.cause=null==r?void 0:r.cause}},w=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="FlagNotFoundError",this.code="FLAG_NOT_FOUND"}},C=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="GeneralError",this.code="GENERAL"}},k=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="InvalidContextError",this.code="INVALID_CONTEXT"}},A=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ParseError",this.code="PARSE_ERROR"}},D=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderFatalError",this.code="PROVIDER_FATAL"}},S=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderNotReadyError",this.code="PROVIDER_NOT_READY"}},x=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TargetingKeyMissingError",this.code="TARGETING_KEY_MISSING"}},T=class e extends P{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TypeMismatchError",this.code="TYPE_MISMATCH"}},I=(e,t)=>{switch(e){case"FLAG_NOT_FOUND":return new w(t);case"PARSE_ERROR":return new A(t);case"TYPE_MISMATCH":return new T(t);case"TARGETING_KEY_MISSING":return new x(t);case"INVALID_CONTEXT":return new k(t);case"PROVIDER_NOT_READY":return new S(t);case"PROVIDER_FATAL":return new D(t);default:return new C(t)}},N=((s=N||{}).NOT_READY="NOT_READY",s.READY="READY",s.ERROR="ERROR",s.STALE="STALE",s.FATAL="FATAL",s),L=((l=L||{}).NOT_READY="NOT_READY",l.READY="READY",l.ERROR="ERROR",l.STALE="STALE",l.FATAL="FATAL",l.RECONCILING="RECONCILING",l),j=((u=j||{}).Ready="PROVIDER_READY",u.Error="PROVIDER_ERROR",u.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",u.Stale="PROVIDER_STALE",u),F=((c=F||{}).Ready="PROVIDER_READY",c.Error="PROVIDER_ERROR",c.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",c.ContextChanged="PROVIDER_CONTEXT_CHANGED",c.Reconciling="PROVIDER_RECONCILING",c.Stale="PROVIDER_STALE",c),H={READY:"PROVIDER_READY",ERROR:"PROVIDER_ERROR",FATAL:"PROVIDER_ERROR",STALE:"PROVIDER_STALE",RECONCILING:"PROVIDER_RECONCILING",NOT_READY:void 0},V=(e,t)=>!t&&"PROVIDER_READY"===e||H[t]===e,M=class{error(...e){console.error(...e)}warn(...e){console.warn(...e)}info(){}debug(){}},U=["error","warn","info","debug"],G=class{constructor(e){this.fallbackLogger=new M;try{for(let t of U)if(!e[t]||"function"!=typeof e[t])throw Error(`The provided logger is missing the ${t} method.`);this.logger=e}catch(e){console.error(e),console.error("Falling back to the default logger."),this.logger=this.fallbackLogger}}error(...e){this.log("error",...e)}warn(...e){this.log("warn",...e)}info(...e){this.log("info",...e)}debug(...e){this.log("debug",...e)}log(e,...t){try{this.logger[e](...t)}catch(r){this.fallbackLogger[e](...t)}}},$=class{constructor(e){this.globalLogger=e,this._handlers={PROVIDER_CONFIGURATION_CHANGED:new WeakMap,PROVIDER_CONTEXT_CHANGED:new WeakMap,PROVIDER_READY:new WeakMap,PROVIDER_ERROR:new WeakMap,PROVIDER_STALE:new WeakMap,PROVIDER_RECONCILING:new WeakMap}}emit(e,t){this.eventEmitter.emit(e,t)}addHandler(e,t){let r=e=>O(this,null,function*(){var r;try{yield t(e)}catch(e){null==(r=this._logger)||r.error("Error running event handler:",e)}}),n=this._handlers[e].get(t);this._handlers[e].set(t,[...n||[],r]),this.eventEmitter.on(e,r)}removeHandler(e,t){let r=this._handlers[e].get(t);if(r){let t=r.pop();t&&this.eventEmitter.removeListener(e,t)}}removeAllHandlers(e){e?this.eventEmitter.removeAllListeners(e):this.eventEmitter.removeAllListeners()}getHandlers(e){return this.eventEmitter.listeners(e)}setLogger(e){return this._eventLogger=new G(e),this}get _logger(){var e,t;return null!=(t=this._eventLogger)?t:null==(e=this.globalLogger)?void 0:e.call(this)}};function Y(e){return"string"==typeof e?e:void 0}function z(e){return"object"==typeof e?e:void 0}function B(e){return null!=e}var K=class{constructor(e,t,r){var n,o,i;this._provider=e,this._status=t,this._pendingContextChanges=0,null==(n=e.events)||n.addHandler("PROVIDER_READY",()=>{this._status=r.READY}),null==(o=e.events)||o.addHandler("PROVIDER_STALE",()=>{this._status=r.STALE}),null==(i=e.events)||i.addHandler("PROVIDER_ERROR",e=>{(null==e?void 0:e.errorCode)==="PROVIDER_FATAL"?this._status=r.FATAL:this._status=r.ERROR})}get provider(){return this._provider}set provider(e){this._provider=e}get status(){return this._status}set status(e){this._status=e}get allContextChangesSettled(){return 0===this._pendingContextChanges}incrementPendingContextChanges(){this._pendingContextChanges++}decrementPendingContextChanges(){this._pendingContextChanges--}},W=class{constructor(e){this._hooks=[],this._context={},this._logger=new M,this._clientEventHandlers=new Map,this._domainScopedContext=new Map,this._clientEvents=new Map,this._runsOn=e}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}setLogger(e){return this._logger=new G(e),this}get providerMetadata(){return this.getProviderMetadata()}getProviderMetadata(e){return this.getProviderForClient(e).metadata}addHandler(e,t,r){[...new Map([[void 0,this._defaultProvider]]),...this._domainScopedProviders].forEach(r=>{var n;let o=r[0],i=r[1].provider;if(V(e,r[1].status))try{t({domain:o,providerName:i.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}}),this._apiEmitter.addHandler(e,t),(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this._apiEmitter.removeHandler(e,t)}clearHandlers(){this._apiEmitter.removeAllHandlers()}getHandlers(e){return this._apiEmitter.getHandlers(e)}setAwaitableProvider(e,t){var r,n,o,i,a,s,l,u;let c;let d=Y(e),h=null!=(r=z(e))?r:z(t);if(!h){this._logger.debug("No provider defined, ignoring setProvider call");return}let v=this.getProviderForClient(d),f=h.metadata.name;if(v===h){this._logger.debug("Provider is already set, ignoring setProvider call");return}if(h.runsOn){if(h.runsOn!==this._runsOn)throw new C(`Provider '${h.metadata.name}' is intended for use on the ${h.runsOn}.`)}else this._logger.debug(`Provider '${h.metadata.name}' has not defined its intended use.`);let g=this.getAssociatedEventEmitters(d),p=new K(h,this._statusEnumType.NOT_READY,this._statusEnumType);return"function"!=typeof h.initialize||this.allProviders.includes(h)?(p.status=this._statusEnumType.READY,g.forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})}),null==(s=this._apiEmitter)||s.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})):c=null==(a=null==(i=null==(o=h.initialize)?void 0:o.call(h,d&&null!=(n=this._domainScopedContext.get(d))?n:this._context))?void 0:i.then(()=>{var e;p.status=this._statusEnumType.READY,this.getAssociatedEventEmitters(d).forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})}),null==(e=this._apiEmitter)||e.emit("PROVIDER_READY",{clientName:d,domain:d,providerName:f})}))?void 0:a.catch(e=>{var t;throw(null==e?void 0:e.code)==="PROVIDER_FATAL"?p.status=this._statusEnumType.FATAL:p.status=this._statusEnumType.ERROR,this.getAssociatedEventEmitters(d).forEach(t=>{null==t||t.emit("PROVIDER_ERROR",{clientName:d,domain:d,providerName:f,message:null==e?void 0:e.message})}),null==(t=this._apiEmitter)||t.emit("PROVIDER_ERROR",{clientName:d,domain:d,providerName:f,message:null==e?void 0:e.message}),e}),d?this._domainScopedProviders.set(d,p):this._defaultProvider=p,this.transferListeners(v,h,d,g),this.allProviders.includes(v)||null==(u=null==(l=null==v?void 0:v.onClose)?void 0:l.call(v))||u.catch(e=>{this._logger.error(`error closing provider: ${null==e?void 0:e.message}, ${null==e?void 0:e.stack}`)}),c}getProviderForClient(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.provider)?r:this._defaultProvider.provider}buildAndCacheEventEmitterForClient(e){let t=this._clientEvents.get(e);if(t)return t;let r=this._createEventEmitter();this._clientEvents.set(e,r);let n=this.getProviderForClient(e);return Object.values(F).forEach(t=>{var o;return null==(o=n.events)?void 0:o.addHandler(t,o=>O(this,null,function*(){r.emit(t,y(E({},o),{clientName:e,domain:e,providerName:n.metadata.name}))}))}),r}getUnboundEmitters(){let e=[...this._domainScopedProviders.keys()];return[...[...this._clientEvents.keys()].filter(B).filter(t=>!e.includes(t)).map(e=>this._clientEvents.get(e)),this._clientEvents.get(void 0)].filter(B)}getAssociatedEventEmitters(e){return e?[this.buildAndCacheEventEmitterForClient(e)]:this.getUnboundEmitters()}transferListeners(e,t,r,n){var o;null==(o=this._clientEventHandlers.get(r))||o.forEach(t=>{var r;return null==(r=e.events)?void 0:r.removeHandler(...t)});let i=Object.values(F).map(e=>[e,o=>O(this,null,function*(){n.forEach(n=>{null==n||n.emit(e,y(E({},o),{clientName:r,domain:r,providerName:t.metadata.name}))}),this._apiEmitter.emit(e,y(E({},o),{clientName:r,domain:r,providerName:t.metadata.name}))})]);this._clientEventHandlers.set(r,i),i.forEach(e=>{var r;return null==(r=t.events)?void 0:r.addHandler(...e)})}close(){return O(this,null,function*(){var e,t;try{yield null==(t=null==(e=this==null?void 0:this._defaultProvider.provider)?void 0:e.onClose)?void 0:t.call(e)}catch(e){this.handleShutdownError(this._defaultProvider.provider,e)}let r=Array.from(this._domainScopedProviders);yield Promise.all(r.map(e=>O(this,[e],function*([,e]){var t,r;try{yield null==(r=null==e?void 0:(t=e.provider).onClose)?void 0:r.call(t)}catch(t){this.handleShutdownError(null==e?void 0:e.provider,t)}})))})}clearProvidersAndSetDefault(e){return O(this,null,function*(){try{yield this.close()}catch(e){this._logger.error("Unable to cleanly close providers. Resetting to the default configuration.")}finally{this._domainScopedProviders.clear(),this._defaultProvider=new K(e,this._statusEnumType.NOT_READY,this._statusEnumType)}})}get allProviders(){return[...[...this._domainScopedProviders.values()].map(e=>e.provider),this._defaultProvider.provider]}handleShutdownError(e,t){this._logger.error(`Error during shutdown of provider ${e.metadata.name}: ${t}`),this._logger.error(null==t?void 0:t.stack)}},q=Object.create,X=Object.defineProperty,J=Object.defineProperties,Q=Object.getOwnPropertyDescriptor,Z=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertyNames,et=Object.getOwnPropertySymbols,er=Object.getPrototypeOf,en=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable,ei=Reflect.get,ea=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,es=(e,t)=>{for(var r in t||(t={}))en.call(t,r)&&ea(e,r,t[r]);if(et)for(var r of et(t))eo.call(t,r)&&ea(e,r,t[r]);return e},el=(e,t)=>J(e,Z(t)),eu=(e,t,r)=>ei(er(e),r,t),ec=(e,t,r)=>new Promise((n,o)=>{var i=e=>{try{s(r.next(e))}catch(e){o(e)}},a=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}),ed=(n={"../../node_modules/eventemitter3/index.js"(e,t){var r=Object.prototype.hasOwnProperty,n="~";function o(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,o,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)r.call(e,t)&&o.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=Array(i);o<i;o++)a[o]=r[o].fn;return a},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,i),!0;case 6:return c.fn.call(c.context,t,r,o,i,a),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,v=c.length;for(u=0;u<v;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,o);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||o&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,void 0!==t&&(t.exports=l)}},function(){return o||(0,n[ee(n)[0]])((o={exports:{}}).exports,o),o.exports}),eh=new class{constructor(){this.metadata={name:"No-op Provider"}}resolveBooleanEvaluation(e,t){return this.noOp(t)}resolveStringEvaluation(e,t){return this.noOp(t)}resolveNumberEvaluation(e,t){return this.noOp(t)}resolveObjectEvaluation(e,t){return this.noOp(t)}noOp(e){return{value:e,reason:"No-op"}}},ev=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of ee(t))en.call(e,o)||o===r||X(e,o,{get:()=>t[o],enumerable:!(n=Q(t,o))||n.enumerable});return e})(X(null!=(i=ed())?q(er(i)):{},"default",{value:i,enumerable:!0}),i),ef=class extends ${constructor(){super(),this.eventEmitter=new ev.default}},eg=class{constructor(e,t,r,n,o,i,a){this.providerAccessor=e,this.providerStatusAccessor=t,this.emitterAccessor=r,this.apiContextAccessor=n,this.apiHooksAccessor=o,this.globalLogger=i,this.options=a,this._hooks=[]}get metadata(){var e,t;return{name:null!=(e=this.options.domain)?e:this.options.name,domain:null!=(t=this.options.domain)?t:this.options.name,version:this.options.version,providerMetadata:this.providerAccessor().metadata}}get providerStatus(){return this.providerStatusAccessor()}addHandler(e,t,r){var n;if(this.emitterAccessor().addHandler(e,t),V(e,this.providerStatus))try{t({clientName:this.metadata.name,domain:this.metadata.domain,providerName:this._provider.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this.emitterAccessor().removeHandler(e,t)}getHandlers(e){return this.emitterAccessor().getHandlers(e)}setLogger(e){return this._clientLogger=new G(e),this}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}getBooleanValue(e,t,r){return this.getBooleanDetails(e,t,r).value}getBooleanDetails(e,t,r){return this.evaluate(e,this._provider.resolveBooleanEvaluation,t,"boolean",r)}getStringValue(e,t,r){return this.getStringDetails(e,t,r).value}getStringDetails(e,t,r){return this.evaluate(e,this._provider.resolveStringEvaluation,t,"string",r)}getNumberValue(e,t,r){return this.getNumberDetails(e,t,r).value}getNumberDetails(e,t,r){return this.evaluate(e,this._provider.resolveNumberEvaluation,t,"number",r)}getObjectValue(e,t,r){return this.getObjectDetails(e,t,r).value}getObjectDetails(e,t,r){return this.evaluate(e,this._provider.resolveObjectEvaluation,t,"object",r)}track(e,t={}){var r,n,o;try{if(this.shortCircuitIfNotReady(),"function"==typeof this._provider.track){let i=Object.freeze(es({},this.apiContextAccessor(null==(r=this==null?void 0:this.options)?void 0:r.domain)));return null==(o=(n=this._provider).track)?void 0:o.call(n,e,i,t)}this._logger.debug("Provider does not support the track function; will no-op.")}catch(e){this._logger.debug("Error recording tracking event.",e)}}evaluate(e,t,r,n,o={}){var i,a;let s;let l=[...this.apiHooksAccessor(),...this.getHooks(),...o.hooks||[],...this._provider.hooks||[]],u=[...l].reverse(),c=es({},this.apiContextAccessor(null==(i=this==null?void 0:this.options)?void 0:i.domain)),d=u.map(()=>Object.freeze({flagKey:e,defaultValue:r,flagValueType:n,clientMetadata:this.metadata,providerMetadata:this._provider.metadata,context:c,logger:this._logger,hookData:new b}));try{this.beforeHooks(l,d,o),this.shortCircuitIfNotReady();let n=t.call(this._provider,e,r,c,this._logger),i=el(es({},n),{flagMetadata:Object.freeze(null!=(a=n.flagMetadata)?a:{}),flagKey:e});if(i.errorCode){let t=I(i.errorCode,i.errorMessage);this.errorHooks(u,d,t,o),s=this.getErrorEvaluationDetails(e,r,t,i.flagMetadata)}else this.afterHooks(u,d,i,o),s=i}catch(t){this.errorHooks(u,d,t,o),s=this.getErrorEvaluationDetails(e,r,t)}return this.finallyHooks(u,d,s,o),s}beforeHooks(e,t,r){var n;for(let[o,i]of e.entries()){let a=t[e.length-1-o];Object.freeze(a),Object.freeze(a.context),null==(n=null==i?void 0:i.before)||n.call(i,a,Object.freeze(r.hookHints))}}afterHooks(e,t,r,n){var o;for(let[i,a]of e.entries()){let e=t[i];null==(o=null==a?void 0:a.after)||o.call(a,e,r,n.hookHints)}}errorHooks(e,t,r,n){var o;for(let[i,a]of e.entries())try{let e=t[i];null==(o=null==a?void 0:a.error)||o.call(a,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'error' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}finallyHooks(e,t,r,n){var o;for(let[i,a]of e.entries())try{let e=t[i];null==(o=null==a?void 0:a.finally)||o.call(a,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'finally' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}get _provider(){return this.providerAccessor()}get _logger(){return this._clientLogger||this.globalLogger()}shortCircuitIfNotReady(){if(this.providerStatus===L.NOT_READY)throw new S("provider has not yet initialized");if(this.providerStatus===L.FATAL)throw new D("provider is in an irrecoverable error state")}getErrorEvaluationDetails(e,t,r,n={}){let o=null==r?void 0:r.message;return{errorCode:(null==r?void 0:r.code)||_.GENERAL,errorMessage:o,value:t,reason:R,flagMetadata:Object.freeze(n),flagKey:e}}},ep=Symbol.for("@openfeature/web-sdk/api"),em=globalThis;(class e extends W{constructor(){super("client"),this._statusEnumType=L,this._apiEmitter=new ef,this._defaultProvider=new K(eh,L.NOT_READY,this._statusEnumType),this._domainScopedProviders=new Map,this._createEventEmitter=()=>new ef}static getInstance(){let t=em[ep];if(t)return t;let r=new e;return em[ep]=r,r}getProviderStatus(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.status)?r:this._defaultProvider.status}setProviderAndWait(e,t,r){return ec(this,null,function*(){let n=Y(e),o=n?z(t):z(e),i=n?z(r):z(t);i&&(n?this._domainScopedContext.set(n,i):this._context=i),yield this.setAwaitableProvider(n,o)})}setProvider(e,t,r){let n=Y(e),o=n?z(t):z(e),i=n?z(r):z(t);return i&&(n?this._domainScopedContext.set(n,i):this._context=i),Promise.resolve(this.setAwaitableProvider(n,o)).catch(e=>{this._logger.error("Error during provider initialization:",e)}),this}getProvider(e){return this.getProviderForClient(e)}setContext(e,t){return ec(this,null,function*(){var r,n;let o=Y(e),i=null!=(n=null!=(r=z(e))?r:z(t))?n:{};if(o){let e=this._domainScopedProviders.get(o);if(e){let t=this.getContext(o);this._domainScopedContext.set(o,i),yield this.runProviderContextChangeHandler(o,e,t,i)}else this._domainScopedContext.set(o,i)}else{let e=this._context;this._context=i;let t=Array.from(this._domainScopedProviders.entries()).filter(([e])=>!this._domainScopedContext.has(e)).reduce((e,[t,r])=>(e.push({domain:t,wrapper:r}),e),[]),r=[{domain:void 0,wrapper:this._defaultProvider},...t];yield Promise.all(r.map(t=>this.runProviderContextChangeHandler(t.domain,t.wrapper,e,i)))}})}getContext(e){let t=Y(e);if(t){let e=this._domainScopedContext.get(t);if(e)return e;this._logger.debug(`Unable to find context for '${t}'.`)}return this._context}clearContext(e){return ec(this,null,function*(){let t=Y(e);if(!t)return this.setContext({});{let e=this._domainScopedProviders.get(t);if(e){let r=this.getContext(t);this._domainScopedContext.delete(t);let n=this.getContext();yield this.runProviderContextChangeHandler(t,e,r,n)}else this._domainScopedContext.delete(t)}})}clearContexts(){return ec(this,null,function*(){yield this.clearContext(),yield Promise.allSettled(Array.from(this._domainScopedProviders.keys()).map(e=>this.clearContext(e)))})}getClient(e,t){return new eg(()=>this.getProviderForClient(e),()=>this.getProviderStatus(e),()=>this.buildAndCacheEventEmitterForClient(e),e=>this.getContext(e),()=>this.getHooks(),()=>this._logger,{domain:e,version:t})}clearProviders(){return ec(this,null,function*(){yield eu(e.prototype,this,"clearProvidersAndSetDefault").call(this,eh),this._domainScopedContext.clear()})}runProviderContextChangeHandler(e,t,r,n){return ec(this,null,function*(){var o,i,a,s,l,u;let c=(null==(i=null==(o=t.provider)?void 0:o.metadata)?void 0:i.name)||"unnamed-provider";try{if("function"==typeof t.provider.onContextChange){let o=t.provider.onContextChange(r,n);o&&"function"==typeof(null==o?void 0:o.then)&&(t.incrementPendingContextChanges(),t.status=this._statusEnumType.RECONCILING,this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(F.Reconciling,{domain:e,providerName:c})}),null==(a=this._apiEmitter)||a.emit(F.Reconciling,{domain:e,providerName:c}),yield o,t.decrementPendingContextChanges())}t.status=this._statusEnumType.READY,t.allContextChangesSettled&&(this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(F.ContextChanged,{clientName:e,domain:e,providerName:c})}),null==(s=this._apiEmitter)||s.emit(F.ContextChanged,{clientName:e,domain:e,providerName:c}))}catch(r){if(t.decrementPendingContextChanges(),t.status=this._statusEnumType.ERROR,t.allContextChangesSettled){let t=`Error running ${c}'s context change handler: ${null==r?void 0:r.message}`;null==(l=this._logger)||l.error(`${t}`,r),this.getAssociatedEventEmitters(e).forEach(r=>{null==r||r.emit(F.Error,{clientName:e,domain:e,providerName:c,message:t})}),null==(u=this._apiEmitter)||u.emit(F.Error,{clientName:e,domain:e,providerName:c,message:t})}}})}}).getInstance();var eE=r(35215),ey=r.n(eE),eO=r(24227);function eb(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function eR(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;let e_={name:"string",anonymous:"boolean"};function eP(e,t,r){let n=t.key,o=null!=r?r:n;null!=n&&null!=r&&e.warn("The EvaluationContext contained both a 'targetingKey' and a 'key' attribute. The 'key' attribute will be discarded."),null==o&&e.error("The EvaluationContext must contain either a 'targetingKey' or a 'key' and the type must be a string.");let i={key:o};return Object.entries(t).forEach(([r,n])=>{"targetingKey"!==r&&"key"!==r&&("privateAttributes"===r?i._meta={privateAttributes:n}:r in e_?typeof n===e_[r]?i[r]=n:e.error(`The attribute '${r}' must be of type ${e_[r]}`):function e(t,r,n,o,i){if(i.includes(n)){t.error("Detected a cycle within the evaluation context. The affected part of the context will not be included in evaluation.");return}n instanceof Date?o[r]=n.toISOString():"object"!=typeof n||Array.isArray(n)?o[r]=n:(o[r]={},Object.entries(n).forEach(([a,s])=>{e(t,a,s,o[r],[...i,n])}))}(e,r,n,i,[t]))}),i}function ew(e){var t,r,n;let o={value:e.value,variant:null===(t=e.variationIndex)||void 0===t?void 0:t.toString(),reason:null===(r=e.reason)||void 0===r?void 0:r.kind};return(null===(n=e.reason)||void 0===n?void 0:n.kind)==="ERROR"&&(o.errorCode=function(e){switch(e){case"CLIENT_NOT_READY":return _.PROVIDER_NOT_READY;case"MALFORMED_FLAG":return _.PARSE_ERROR;case"FLAG_NOT_FOUND":return _.FLAG_NOT_FOUND;case"USER_NOT_SPECIFIED":return _.TARGETING_KEY_MISSING;default:return _.GENERAL}}(e.reason.errorKind)),o}function eC(e){return{value:e,reason:R,errorCode:_.TYPE_MISMATCH}}class ek{set status(e){this._status=e}get status(){return this._status}constructor(e,t){var{logger:r,initializationTimeout:n}=t,o=eb(t,["logger","initializationTimeout"]);this.envKey=e,this.metadata={name:"launchdarkly-client-provider"},this.events=new ef,this._status=L.NOT_READY,r?this.logger=r:this.logger=(0,eO.basicLogger)({level:"info"}),this.initializationTimeout=n,this.ldOptions=Object.assign(Object.assign({},o),{logger:this.logger,wrapperName:"open-feature-community-js-client",wrapperVersion:"0.3.3"})}get client(){if(!this._client)throw new C("Provider is not initialized");return this._client}initialize(e){return eR(this,void 0,void 0,function*(){var t;let r=ey()(e)?{anonymous:!0}:this.translateContext(e);this._client=(0,eO.initialize)(this.envKey,r,this.ldOptions),(null===(t=this.ldOptions)||void 0===t?void 0:t.streaming)&&this.setListeners();try{yield this._client.waitForInitialization(this.initializationTimeout),this.status=L.READY}catch(e){this.status=L.ERROR}})}onClose(){return this.client.close()}setListeners(){this.client.on("change",e=>{this.events.emit(F.ConfigurationChanged,{flagsChanged:Object.keys(e)})})}onContextChange(e,t){return eR(this,void 0,void 0,function*(){yield this.client.identify(this.translateContext(t))})}resolveBooleanEvaluation(e,t){let r=this.client.variationDetail(e,t);return"boolean"==typeof r.value?ew(r):eC(t)}resolveNumberEvaluation(e,t){let r=this.client.variationDetail(e,t);return"number"==typeof r.value?ew(r):eC(t)}resolveObjectEvaluation(e,t){let r=this.client.variationDetail(e,t);return"object"==typeof r.value?ew(r):eC(t)}resolveStringEvaluation(e,t){let r=this.client.variationDetail(e,t);return"string"==typeof r.value?ew(r):eC(t)}track(e,t,r){var{value:n}=r,o=eb(r,["value"]);this.client.track(e,o,n)}translateContext(e){var t;let r;return t=this.logger,r="user","multi"===e.kind?Object.entries(e).reduce((e,[r,n])=>("kind"===r?e.kind=n:"object"!=typeof n||Array.isArray(n)?t.error("Top level attributes in a multi-kind context should be Structure types."):e[r]=eP(t,n,n.targetingKey),e),{}):(void 0!==e.kind&&"string"==typeof e.kind?r=e.kind:void 0!==e.kind&&"string"!=typeof e.kind&&t.warn("Specified 'kind' of context was not a string."),Object.assign({kind:r},eP(t,e,e.targetingKey)))}}},36129:function(e,t,r){"use strict";let n,o;var i=Object.create,a=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&g(e,r,t[r]);if(d)for(var r of d(t))f.call(t,r)&&g(e,r,t[r]);return e},m=(e,t)=>s(e,u(t)),E=(e,t)=>{var r={};for(var n in e)v.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))0>t.indexOf(n)&&f.call(e,n)&&(r[n]=e[n]);return r},y=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of c(t))v.call(e,o)||o===r||a(e,o,{get:()=>t[o],enumerable:!(n=l(t,o))||n.enumerable});return e},O=(e,t,r)=>(r=null!=e?i(h(e)):{},y(!t&&e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)),b=(e,t,r)=>new Promise((n,o)=>{var i=e=>{try{s(r.next(e))}catch(e){o(e)}},a=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}),R={};((e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})})(R,{FeatureFlag:()=>ei,OpenFeatureProvider:()=>el,OpenFeatureTestProvider:()=>eg,useBooleanFlagDetails:()=>J,useBooleanFlagValue:()=>X,useContextMutator:()=>eE,useFlag:()=>W,useNumberFlagDetails:()=>et,useNumberFlagValue:()=>ee,useObjectFlagDetails:()=>en,useObjectFlagValue:()=>er,useOpenFeatureClient:()=>V,useOpenFeatureClientStatus:()=>G,useStringFlagDetails:()=>Z,useStringFlagValue:()=>Q,useSuspenseFlag:()=>q,useTrack:()=>eO,useWhenProviderReady:()=>ec}),e.exports=y(a({},"__esModule",{value:!0}),R);var _=O(r(14978)),P=r(37463),w=r(14978),C=O(r(14978)),k=C.default.createContext(void 0);function A(){let{options:e}=C.default.useContext(k)||{};return x(e)}function D(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n of r)if(!D(e[n],t[n]))return!1;return!0}return!1}var S={updateOnContextChanged:!0,updateOnConfigurationChanged:!0,suspendUntilReady:!1,suspendWhileReconciling:!1},x=(e={})=>{let t=e.updateOnContextChanged,r=e.updateOnConfigurationChanged,n="suspendUntilReady"in e?e.suspendUntilReady:e.suspend,o="suspendWhileReconciling"in e?e.suspendWhileReconciling:e.suspend;return p(p(p(p({},"boolean"==typeof n&&{suspendUntilReady:n}),"boolean"==typeof o&&{suspendWhileReconciling:o}),"boolean"==typeof t&&{updateOnContextChanged:t}),"boolean"==typeof r&&{updateOnConfigurationChanged:r})},T=r(37463),I=O(r(14978)).default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),N=new WeakMap;function L(e,t){let r=N.get(e);if(r)I(r);else{let r=e!==T.NOOP_PROVIDER?j(t):Promise.resolve();N.set(e,r),I(r)}}function j(e){return b(this,null,function*(){let t=new AbortController;try{return yield new Promise((r,n)=>{e.addHandler(T.ProviderEvents.Ready,r,{signal:t.signal}),e.addHandler(T.ProviderEvents.Error,n,{signal:t.signal})})}finally{t.abort()}})}var F=O(r(14978)),H=class extends Error{constructor(e){super(`${e}: Components using OpenFeature must be wrapped with an <OpenFeatureProvider>. If you are seeing this in a test, see: https://openfeature.dev/docs/reference/technologies/client/web/react#testing`),this.name="MissingContextError"}};function V(){let{client:e}=F.default.useContext(k)||{};if(!e)throw new H("No OpenFeature client available");return e}var M=r(14978),U=r(37463);function G(){let e=V(),[t,r]=(0,M.useState)(e.providerStatus);return(0,M.useEffect)(()=>{let t=new AbortController,n=()=>r(e.providerStatus);return e.addHandler(U.ProviderEvents.ConfigurationChanged,n,{signal:t.signal}),e.addHandler(U.ProviderEvents.ContextChanged,n,{signal:t.signal}),e.addHandler(U.ProviderEvents.Error,n,{signal:t.signal}),e.addHandler(U.ProviderEvents.Ready,n,{signal:t.signal}),e.addHandler(U.ProviderEvents.Stale,n,{signal:t.signal}),e.addHandler(U.ProviderEvents.Reconciling,n,{signal:t.signal}),()=>{t.abort()}},[e]),t}var $=O(r(14978)),Y=r(37463);function z(){let e=$.default.useContext(k);if(!e)throw new H("No OpenFeature context available");return Y.OpenFeature.getProvider(e.client.metadata.domain)}var B=r(37463),K=class{constructor(e){this._details=e}get details(){return this._details}get value(){var e;return null==(e=this._details)?void 0:e.value}get variant(){return this._details.variant}get flagMetadata(){return this._details.flagMetadata}get reason(){return this._details.reason}get isError(){var e;return!!(null==(e=this._details)?void 0:e.errorCode)||this._details.reason==B.StandardResolutionReasons.ERROR}get errorCode(){var e;return null==(e=this._details)?void 0:e.errorCode}get errorMessage(){var e;return null==(e=this._details)?void 0:e.errorMessage}get isAuthoritative(){return!this.isError&&this._details.reason!=B.StandardResolutionReasons.STALE&&this._details.reason!=B.StandardResolutionReasons.DISABLED}get type(){return typeof this._details.value}};function W(e,t,r){return new K("boolean"==typeof t?J(e,t,r):"number"==typeof t?et(e,t,r):"string"==typeof t?Z(e,t,r):en(e,t,r))}function q(e,t,r){return W(e,t,m(p({},r),{suspendUntilReady:!0,suspendWhileReconciling:!0}))}function X(e,t,r){return J(e,t,r).value}function J(e,t,r){return eo(e,t,e=>e.getBooleanDetails,r)}function Q(e,t,r){return Z(e,t,r).value}function Z(e,t,r){return eo(e,t,e=>e.getStringDetails,r)}function ee(e,t,r){return et(e,t,r).value}function et(e,t,r){return eo(e,t,e=>e.getNumberDetails,r)}function er(e,t,r){return en(e,t,r).value}function en(e,t,r){return eo(e,t,e=>e.getObjectDetails,r)}function eo(e,t,r,n){let o=p(p(p({},S),A()),x(n)),i=V(),a=G(),s=z(),l=(0,w.useRef)(!0);o.suspendUntilReady&&a===P.ProviderStatus.NOT_READY&&L(s,i),o.suspendWhileReconciling&&a===P.ProviderStatus.RECONCILING&&I(j(i));let[u,c]=(0,w.useState)(()=>r(i).call(i,e,t,n));(0,w.useEffect)(()=>{if(l.current){l.current=!1;return}let o=r(i).call(i,e,t,n);D(o,u)||c(o)},[i,e,t,n,r,u]);let d=(0,w.useRef)(u);(0,w.useEffect)(()=>{d.current=u},[u]);let h=(0,w.useCallback)(()=>{let o=r(i).call(i,e,t,n);D(o,d.current)||c(o)},[i,e,t,n,r]),v=(0,w.useCallback)(t=>{var r;(!(r=null==t?void 0:t.flagsChanged)||r.includes(e))&&h()},[e,h]);return(0,w.useEffect)(()=>{let e=new AbortController;return a===P.ProviderStatus.NOT_READY&&i.addHandler(P.ProviderEvents.Ready,h,{signal:e.signal}),o.updateOnContextChanged&&i.addHandler(P.ProviderEvents.ContextChanged,h,{signal:e.signal}),o.updateOnConfigurationChanged&&i.addHandler(P.ProviderEvents.ConfigurationChanged,v,{signal:e.signal}),()=>{e.abort()}},[i,a,o.updateOnContextChanged,o.updateOnConfigurationChanged,h,v]),u}function ei({flagKey:e,matchValue:t,predicate:r,defaultValue:n,children:o,evaluationOptions:i={},fallback:a=null}){let s=W(e,n,p({updateOnContextChanged:!0},i));if("ERROR"===s.reason){let e="function"==typeof a?a(s.details):a;return _.default.createElement(_.default.Fragment,null,e)}let l=!1;if(r?r(t,s.details):void 0!==t?D(t,s.details.value):"boolean"===s.type&&!!s.value){let e="function"==typeof o?o(s):o;return _.default.createElement(_.default.Fragment,null,e)}let u="function"==typeof a?a(s.details):a;return _.default.createElement(_.default.Fragment,null,u)}var ea=r(37463),es=O(r(14978));function el(e){var{client:t,domain:r,children:n}=e,o=E(e,["client","domain","children"]);let i=es.useMemo(()=>t||ea.OpenFeature.getClient(r),[t,r]);return es.createElement(k.Provider,{value:{client:i,options:o}},n)}var eu=r(37463);function ec(e){let t=p(p(p({},S),A()),x(e)),r=V(),n=G(),o=z();return t.suspendUntilReady&&n===eu.ProviderStatus.NOT_READY&&L(o,r),n===eu.ProviderStatus.READY}var ed=r(37463),eh=O(r(14978)),ev="test-variant",ef=class extends ed.InMemoryProvider{constructor(e,t=0){super(Object.entries(e).reduce((e,t)=>m(p({},e),{[t[0]]:{variants:{[ev]:t[1]},defaultVariant:ev,disabled:!1}}),{})),this.delay=t,this.initialize=void 0,this.delayedInitialize=()=>b(this,null,function*(){yield new Promise(e=>setTimeout(e,this.delay))}),this.initialize=this.delay?this.delayedInitialize.bind(this):void 0}onContextChange(){return b(this,null,function*(){return new Promise(e=>setTimeout(e,this.delay))})}};function eg(e){let{flagValueMap:t,provider:r}=e,n=t?new ef(t,e.delayMs):function(e={}){for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(ed.NOOP_PROVIDER)).filter(e=>"constructor"!==e))Object.getPrototypeOf(e)[t]||e[t]||(e[t]=Object.getPrototypeOf(ed.NOOP_PROVIDER)[t]);return e.metadata&&e.metadata.name||(e.metadata={name:"test-provider"}),e}(r)||ed.NOOP_PROVIDER;return e.domain?ed.OpenFeature.setProvider(e.domain,n):ed.OpenFeature.setProvider(n),eh.default.createElement(el,m(p({},e),{domain:e.domain}),e.children)}var ep=r(14978),em=r(37463);function eE(e={defaultContext:!1}){let{client:t}=(0,ep.useContext)(k)||{},r=null==t?void 0:t.metadata.domain,[n,o]=(0,ep.useState)(!1);return(0,ep.useEffect)(()=>{if(e.defaultContext||r){n&&o(!1);return}n||(console.warn("[useContextMutator] No domain available from OpenFeature context; are you using <OpenFeatureProvider/>? setContext will mutate the default context, as if `defaultContext: true` were set. This may result in a thrown error in the future."),o(!0))},[n]),{setContext:(0,ep.useCallback)(t=>b(null,null,function*(){let n=em.OpenFeature.getContext((null==e?void 0:e.defaultContext)?void 0:r),o="function"==typeof t?t(n):t;n!==o&&(!r||(null==e?void 0:e.defaultContext)?yield em.OpenFeature.setContext(o):yield em.OpenFeature.setContext(r,o))}),[r,null==e?void 0:e.defaultContext])}}var ey=r(14978);function eO(){let e=V();return{track:(0,ey.useCallback)((t,r)=>{e.track(t,r)},[])}}n=r(37463),o=e.exports,y(R,n,"default"),o&&y(o,n,"default")},37463:function(e,t,r){"use strict";let n,o,i,a,s;var l=Object.create,u=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,g=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,E=Reflect.get,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&y(e,r,t[r]);if(f)for(var r of f(t))m.call(t,r)&&y(e,r,t[r]);return e},b=(e,t)=>c(e,h(t)),R=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of v(t))p.call(e,o)||o===r||u(e,o,{get:()=>t[o],enumerable:!(n=d(t,o))||n.enumerable});return e},_=(e,t,r)=>E(g(e),r,t),P=(e,t,r)=>new Promise((n,o)=>{var i=e=>{try{s(r.next(e))}catch(e){o(e)}},a=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,a);s((r=r.apply(e,t)).next())}),w=(n={"../../node_modules/eventemitter3/index.js"(e,t){var r=Object.prototype.hasOwnProperty,n="~";function o(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,o,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)r.call(e,t)&&o.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=Array(i);o<i;o++)a[o]=r[o].fn;return a},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,i),!0;case 6:return c.fn.call(c.context,t,r,o,i,a),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,v=c.length;for(u=0;u<v;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,o);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||o&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,void 0!==t&&(t.exports=l)}},function(){return o||(0,n[v(n)[0]])((o={exports:{}}).exports,o),o.exports}),C={};((e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})})(C,{ComparisonStrategy:()=>U,FirstMatchStrategy:()=>V,FirstSuccessfulStrategy:()=>M,InMemoryProvider:()=>j,MultiProvider:()=>$,NOOP_PROVIDER:()=>A,OpenFeature:()=>X,OpenFeatureAPI:()=>q,OpenFeatureEventEmitter:()=>T,ProviderEvents:()=>I.ClientProviderEvents,ProviderStatus:()=>k.ClientProviderStatus}),e.exports=R(u({},"__esModule",{value:!0}),C);var k=r(39219),A=new class{constructor(){this.metadata={name:"No-op Provider"}}resolveBooleanEvaluation(e,t){return this.noOp(t)}resolveStringEvaluation(e,t){return this.noOp(t)}resolveNumberEvaluation(e,t){return this.noOp(t)}resolveObjectEvaluation(e,t){return this.noOp(t)}noOp(e){return{value:e,reason:"No-op"}}},D=r(39219),S=r(39219),x=R(u(null!=(i=w())?l(g(i)):{},"default",{value:i,enumerable:!0}),i),T=class extends S.GenericEventEmitter{constructor(){super(),this.eventEmitter=new x.default}},I=r(39219),N=r(39219),L=class e extends N.OpenFeatureError{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype),this.name="VariantNotFoundError",this.code=N.ErrorCode.GENERAL}},j=class{constructor(e={}){this.events=new T,this.runsOn="client",this.metadata={name:"in-memory"},this._flagConfiguration=O({},e)}putConfiguration(e){return P(this,null,function*(){try{let t=Object.entries(O(O({},e),this._flagConfiguration)).map(([e])=>e);this._flagConfiguration=O({},e),this.events.emit(I.ClientProviderEvents.ConfigurationChanged,{flagsChanged:t})}catch(e){throw this.events.emit(I.ClientProviderEvents.Error),e}})}resolveBooleanEvaluation(e,t,r,n){return this.resolveAndCheckFlag(e,t,r||this._context,n)}resolveNumberEvaluation(e,t,r,n){return this.resolveAndCheckFlag(e,t,r||this._context,n)}resolveStringEvaluation(e,t,r,n){return this.resolveAndCheckFlag(e,t,r||this._context,n)}resolveObjectEvaluation(e,t,r,n){return this.resolveAndCheckFlag(e,t,r||this._context,n)}resolveAndCheckFlag(e,t,r,n){if(!(e in this._flagConfiguration)){let t=`no flag found with key ${e}`;throw null==n||n.debug(t),new D.FlagNotFoundError(t)}if(this._flagConfiguration[e].disabled)return{value:t,reason:D.StandardResolutionReasons.DISABLED};let o=this.resolveFlagWithReason(e,r);if(void 0===o.value){let t=`no value associated with variant provided for ${e} found`;throw null==n||n.error(t),new L(t)}if(typeof o.value!=typeof t)throw new D.TypeMismatchError;return o}resolveFlagWithReason(e,t){try{return this.lookupFlagValue(e,t)}catch(e){if(!(e instanceof D.OpenFeatureError))throw new D.GeneralError((null==e?void 0:e.message)||"unknown error");throw e}}lookupFlagValue(e,t){var r;let n=this._flagConfiguration[e],o=t&&(null==n?void 0:n.contextEvaluator),i=o?null==(r=n.contextEvaluator)?void 0:r.call(n,t):n.defaultVariant,a=i&&(null==n?void 0:n.variants[i]),s=o?D.StandardResolutionReasons.TARGETING_MATCH:D.StandardResolutionReasons.STATIC;return b(O({value:a},i&&{variant:i}),{reason:s})}},F=r(39219),H=r(39219),V=class extends H.BaseFirstMatchStrategy{constructor(){super(k.ClientProviderStatus)}},M=class extends H.BaseFirstSuccessfulStrategy{constructor(){super(k.ClientProviderStatus)}},U=class extends H.BaseComparisonStrategy{constructor(e,t){super(k.ClientProviderStatus,e,t)}},G=class{constructor(e){this.logger=e}beforeHooks(e,t,r){var n;for(let o of null!=e?e:[])null==(n=null==o?void 0:o.before)||n.call(o,t,Object.freeze(r))}afterHooks(e,t,r,n){var o;for(let i of null!=e?e:[])null==(o=null==i?void 0:i.after)||o.call(i,t,r,n)}errorHooks(e,t,r,n){var o;for(let i of null!=e?e:[])try{null==(o=null==i?void 0:i.error)||o.call(i,t,r,n)}catch(e){this.logger.error(`Unhandled error during 'error' hook: ${e}`),e instanceof Error&&this.logger.error(e.stack)}}finallyHooks(e,t,r,n){var o;for(let i of null!=e?e:[])try{null==(o=null==i?void 0:i.finally)||o.call(i,t,r,n)}catch(e){this.logger.error(`Unhandled error during 'finally' hook: ${e}`),e instanceof Error&&this.logger.error(e.stack)}}},$=class e{constructor(t,r=new V,n=new F.DefaultLogger){this.constructorProviders=t,this.evaluationStrategy=r,this.logger=n,this.runsOn="client",this.events=new T,this.hookContexts=new WeakMap,this.hookHints=new WeakMap,this.providerEntries=[],this.providerEntriesByName={},this.statusTracker=new F.StatusTracker(this.events,k.ClientProviderStatus,I.ClientProviderEvents),this.hookExecutor=new G(this.logger),this.registerProviders(t);let o=Object.keys(this.providerEntriesByName).reduce((e,t)=>b(O({},e),{[t]:this.providerEntriesByName[t].provider.metadata}),{});this.metadata=b(O({},o),{name:e.name})}registerProviders(e){var t;let r={};for(let n of e){let e=n.provider.metadata.name,o=null!=(t=n.name)?t:e;if(n.name&&r[n.name])throw Error("Provider names must be unique");null!=r[o]||(r[o]=[]),r[o].push(n.provider)}for(let e of Object.keys(r)){let t=r[e].length>1;for(let n=0;n<r[e].length;n++){let o=t?`${e}-${n+1}`:e;this.providerEntriesByName[o]={provider:r[e][n],name:o},this.providerEntries.push(this.providerEntriesByName[o]),this.statusTracker.wrapEventHandler(this.providerEntriesByName[o])}}Object.freeze(this.providerEntries),Object.freeze(this.providerEntriesByName)}initialize(e){return P(this,null,function*(){let t=yield Promise.allSettled(this.providerEntries.map(t=>{var r,n;return null==(n=(r=t.provider).initialize)?void 0:n.call(r,e)}));(0,F.throwAggregateErrorFromPromiseResults)(t,this.providerEntries)})}onClose(){return P(this,null,function*(){let e=yield Promise.allSettled(this.providerEntries.map(e=>{var t,r;return null==(r=(t=e.provider).onClose)?void 0:r.call(t)}));(0,F.throwAggregateErrorFromPromiseResults)(e,this.providerEntries)})}onContextChange(e,t){return P(this,null,function*(){var r,n;for(let o of this.providerEntries)yield null==(n=(r=o.provider).onContextChange)?void 0:n.call(r,e,t)})}resolveBooleanEvaluation(e,t,r){return this.flagResolutionProxy(e,"boolean",t,r)}resolveStringEvaluation(e,t,r){return this.flagResolutionProxy(e,"string",t,r)}resolveNumberEvaluation(e,t,r){return this.flagResolutionProxy(e,"number",t,r)}resolveObjectEvaluation(e,t,r){return this.flagResolutionProxy(e,"object",t,r)}track(e,t,r){var n,o;for(let i of this.providerEntries){if(!i.provider.track)continue;let a={provider:i.provider,providerName:i.name,providerStatus:this.statusTracker.providerStatus(i.name)};if(this.evaluationStrategy.shouldTrackWithThisProvider(a,t,e,r))try{null==(o=(n=i.provider).track)||o.call(n,e,t,r)}catch(t){this.logger.error(`Error tracking event "${e}" with provider "${i.name}":`,t)}}}flagResolutionProxy(e,t,r,n){var o;let i=this.hookContexts.get(n),a=this.hookHints.get(n);if(!i||!a)throw new F.GeneralError("Hook context not available for evaluation");let s=[];for(let o of this.providerEntries){let[l,u]=this.evaluateProviderEntry(e,t,r,o,i,a,n);if(s.push(u),!l)break}let l=s.filter(e=>!!e),u=this.evaluationStrategy.determineFinalResult({flagKey:e,flagType:t},n,l);if(null==(o=u.errors)?void 0:o.length)throw(0,F.constructAggregateError)(u.errors);if(!u.details)throw new F.GeneralError("No result was returned from any provider");return u.details}evaluateProviderEntry(e,t,r,n,o,i,a){let s;let l=n.provider,u={flagKey:e,flagType:t,provider:l,providerName:n.name,providerStatus:this.statusTracker.providerStatus(n.name)};if(!this.evaluationStrategy.shouldEvaluateThisProvider(u,a))return[!0,null];try{s={details:this.evaluateProviderAndHooks(e,r,l,o,i),provider:l,providerName:n.name}}catch(e){s={thrownError:e,provider:l,providerName:n.name}}return[this.evaluationStrategy.shouldEvaluateNextProvider(u,a,s),s]}evaluateProviderAndHooks(e,t,r,n,o){var i;let a;try{this.hookExecutor.beforeHooks(r.hooks,n,o);let s=this.callProviderResolve(r,e,t,n.context);a=b(O({},s),{flagMetadata:Object.freeze(null!=(i=s.flagMetadata)?i:{}),flagKey:e}),this.hookExecutor.afterHooks(r.hooks,n,a,o)}catch(i){this.hookExecutor.errorHooks(r.hooks,n,i,o),a=this.getErrorEvaluationDetails(e,t,i)}return this.hookExecutor.finallyHooks(r.hooks,n,a,o),a}callProviderResolve(e,t,r,n){switch(typeof r){case"string":return e.resolveStringEvaluation(t,r,n,this.logger);case"number":return e.resolveNumberEvaluation(t,r,n,this.logger);case"object":return e.resolveObjectEvaluation(t,r,n,this.logger);case"boolean":return e.resolveBooleanEvaluation(t,r,n,this.logger);default:throw new F.GeneralError("Invalid flag evaluation type")}}get hooks(){return[{before:(e,t)=>(this.hookContexts.set(e.context,e),this.hookHints.set(e.context,null!=t?t:{}),e.context)}]}getErrorEvaluationDetails(e,t,r,n={}){let o=null==r?void 0:r.message;return{errorCode:(null==r?void 0:r.code)||F.ErrorCode.GENERAL,errorMessage:o,value:t,reason:F.StandardResolutionReasons.ERROR,flagMetadata:Object.freeze(n),flagKey:e}}},Y=r(39219),z=r(39219),B=class{constructor(e,t,r,n,o,i,a){this.providerAccessor=e,this.providerStatusAccessor=t,this.emitterAccessor=r,this.apiContextAccessor=n,this.apiHooksAccessor=o,this.globalLogger=i,this.options=a,this._hooks=[]}get metadata(){var e,t;return{name:null!=(e=this.options.domain)?e:this.options.name,domain:null!=(t=this.options.domain)?t:this.options.name,version:this.options.version,providerMetadata:this.providerAccessor().metadata}}get providerStatus(){return this.providerStatusAccessor()}addHandler(e,t,r){var n;if(this.emitterAccessor().addHandler(e,t),(0,z.statusMatchesEvent)(e,this.providerStatus))try{t({clientName:this.metadata.name,domain:this.metadata.domain,providerName:this._provider.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this.emitterAccessor().removeHandler(e,t)}getHandlers(e){return this.emitterAccessor().getHandlers(e)}setLogger(e){return this._clientLogger=new z.SafeLogger(e),this}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}getBooleanValue(e,t,r){return this.getBooleanDetails(e,t,r).value}getBooleanDetails(e,t,r){return this.evaluate(e,this._provider.resolveBooleanEvaluation,t,"boolean",r)}getStringValue(e,t,r){return this.getStringDetails(e,t,r).value}getStringDetails(e,t,r){return this.evaluate(e,this._provider.resolveStringEvaluation,t,"string",r)}getNumberValue(e,t,r){return this.getNumberDetails(e,t,r).value}getNumberDetails(e,t,r){return this.evaluate(e,this._provider.resolveNumberEvaluation,t,"number",r)}getObjectValue(e,t,r){return this.getObjectDetails(e,t,r).value}getObjectDetails(e,t,r){return this.evaluate(e,this._provider.resolveObjectEvaluation,t,"object",r)}track(e,t={}){var r,n,o;try{if(this.shortCircuitIfNotReady(),"function"==typeof this._provider.track){let i=Object.freeze(O({},this.apiContextAccessor(null==(r=this==null?void 0:this.options)?void 0:r.domain)));return null==(o=(n=this._provider).track)?void 0:o.call(n,e,i,t)}this._logger.debug("Provider does not support the track function; will no-op.")}catch(e){this._logger.debug("Error recording tracking event.",e)}}evaluate(e,t,r,n,o={}){var i,a;let s;let l=[...this.apiHooksAccessor(),...this.getHooks(),...o.hooks||[],...this._provider.hooks||[]],u=[...l].reverse(),c=O({},this.apiContextAccessor(null==(i=this==null?void 0:this.options)?void 0:i.domain)),d=u.map(()=>Object.freeze({flagKey:e,defaultValue:r,flagValueType:n,clientMetadata:this.metadata,providerMetadata:this._provider.metadata,context:c,logger:this._logger,hookData:new z.MapHookData}));try{this.beforeHooks(l,d,o),this.shortCircuitIfNotReady();let n=t.call(this._provider,e,r,c,this._logger),i=b(O({},n),{flagMetadata:Object.freeze(null!=(a=n.flagMetadata)?a:{}),flagKey:e});if(i.errorCode){let t=(0,z.instantiateErrorByErrorCode)(i.errorCode,i.errorMessage);this.errorHooks(u,d,t,o),s=this.getErrorEvaluationDetails(e,r,t,i.flagMetadata)}else this.afterHooks(u,d,i,o),s=i}catch(t){this.errorHooks(u,d,t,o),s=this.getErrorEvaluationDetails(e,r,t)}return this.finallyHooks(u,d,s,o),s}beforeHooks(e,t,r){var n;for(let[o,i]of e.entries()){let a=t[e.length-1-o];Object.freeze(a),Object.freeze(a.context),null==(n=null==i?void 0:i.before)||n.call(i,a,Object.freeze(r.hookHints))}}afterHooks(e,t,r,n){var o;for(let[i,a]of e.entries()){let e=t[i];null==(o=null==a?void 0:a.after)||o.call(a,e,r,n.hookHints)}}errorHooks(e,t,r,n){var o;for(let[i,a]of e.entries())try{let e=t[i];null==(o=null==a?void 0:a.error)||o.call(a,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'error' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}finallyHooks(e,t,r,n){var o;for(let[i,a]of e.entries())try{let e=t[i];null==(o=null==a?void 0:a.finally)||o.call(a,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'finally' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}get _provider(){return this.providerAccessor()}get _logger(){return this._clientLogger||this.globalLogger()}shortCircuitIfNotReady(){if(this.providerStatus===k.ClientProviderStatus.NOT_READY)throw new z.ProviderNotReadyError("provider has not yet initialized");if(this.providerStatus===k.ClientProviderStatus.FATAL)throw new z.ProviderFatalError("provider is in an irrecoverable error state")}getErrorEvaluationDetails(e,t,r,n={}){let o=null==r?void 0:r.message;return{errorCode:(null==r?void 0:r.code)||z.ErrorCode.GENERAL,errorMessage:o,value:t,reason:z.StandardResolutionReasons.ERROR,flagMetadata:Object.freeze(n),flagKey:e}}},K=Symbol.for("@openfeature/web-sdk/api"),W=globalThis,q=class e extends Y.OpenFeatureCommonAPI{constructor(){super("client"),this._statusEnumType=k.ClientProviderStatus,this._apiEmitter=new T,this._defaultProvider=new Y.ProviderWrapper(A,k.ClientProviderStatus.NOT_READY,this._statusEnumType),this._domainScopedProviders=new Map,this._createEventEmitter=()=>new T}static getInstance(){let t=W[K];if(t)return t;let r=new e;return W[K]=r,r}getProviderStatus(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.status)?r:this._defaultProvider.status}setProviderAndWait(e,t,r){return P(this,null,function*(){let n=(0,Y.stringOrUndefined)(e),o=n?(0,Y.objectOrUndefined)(t):(0,Y.objectOrUndefined)(e),i=n?(0,Y.objectOrUndefined)(r):(0,Y.objectOrUndefined)(t);i&&(n?this._domainScopedContext.set(n,i):this._context=i),yield this.setAwaitableProvider(n,o)})}setProvider(e,t,r){let n=(0,Y.stringOrUndefined)(e),o=n?(0,Y.objectOrUndefined)(t):(0,Y.objectOrUndefined)(e),i=n?(0,Y.objectOrUndefined)(r):(0,Y.objectOrUndefined)(t);return i&&(n?this._domainScopedContext.set(n,i):this._context=i),Promise.resolve(this.setAwaitableProvider(n,o)).catch(e=>{this._logger.error("Error during provider initialization:",e)}),this}getProvider(e){return this.getProviderForClient(e)}setContext(e,t){return P(this,null,function*(){var r,n;let o=(0,Y.stringOrUndefined)(e),i=null!=(n=null!=(r=(0,Y.objectOrUndefined)(e))?r:(0,Y.objectOrUndefined)(t))?n:{};if(o){let e=this._domainScopedProviders.get(o);if(e){let t=this.getContext(o);this._domainScopedContext.set(o,i),yield this.runProviderContextChangeHandler(o,e,t,i)}else this._domainScopedContext.set(o,i)}else{let e=this._context;this._context=i;let t=Array.from(this._domainScopedProviders.entries()).filter(([e])=>!this._domainScopedContext.has(e)).reduce((e,[t,r])=>(e.push({domain:t,wrapper:r}),e),[]),r=[{domain:void 0,wrapper:this._defaultProvider},...t];yield Promise.all(r.map(t=>this.runProviderContextChangeHandler(t.domain,t.wrapper,e,i)))}})}getContext(e){let t=(0,Y.stringOrUndefined)(e);if(t){let e=this._domainScopedContext.get(t);if(e)return e;this._logger.debug(`Unable to find context for '${t}'.`)}return this._context}clearContext(e){return P(this,null,function*(){let t=(0,Y.stringOrUndefined)(e);if(!t)return this.setContext({});{let e=this._domainScopedProviders.get(t);if(e){let r=this.getContext(t);this._domainScopedContext.delete(t);let n=this.getContext();yield this.runProviderContextChangeHandler(t,e,r,n)}else this._domainScopedContext.delete(t)}})}clearContexts(){return P(this,null,function*(){yield this.clearContext(),yield Promise.allSettled(Array.from(this._domainScopedProviders.keys()).map(e=>this.clearContext(e)))})}getClient(e,t){return new B(()=>this.getProviderForClient(e),()=>this.getProviderStatus(e),()=>this.buildAndCacheEventEmitterForClient(e),e=>this.getContext(e),()=>this.getHooks(),()=>this._logger,{domain:e,version:t})}clearProviders(){return P(this,null,function*(){yield _(e.prototype,this,"clearProvidersAndSetDefault").call(this,A),this._domainScopedContext.clear()})}runProviderContextChangeHandler(e,t,r,n){return P(this,null,function*(){var o,i,a,s,l,u;let c=(null==(i=null==(o=t.provider)?void 0:o.metadata)?void 0:i.name)||"unnamed-provider";try{if("function"==typeof t.provider.onContextChange){let o=t.provider.onContextChange(r,n);o&&"function"==typeof(null==o?void 0:o.then)&&(t.incrementPendingContextChanges(),t.status=this._statusEnumType.RECONCILING,this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(I.ClientProviderEvents.Reconciling,{domain:e,providerName:c})}),null==(a=this._apiEmitter)||a.emit(I.ClientProviderEvents.Reconciling,{domain:e,providerName:c}),yield o,t.decrementPendingContextChanges())}t.status=this._statusEnumType.READY,t.allContextChangesSettled&&(this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(I.ClientProviderEvents.ContextChanged,{clientName:e,domain:e,providerName:c})}),null==(s=this._apiEmitter)||s.emit(I.ClientProviderEvents.ContextChanged,{clientName:e,domain:e,providerName:c}))}catch(r){if(t.decrementPendingContextChanges(),t.status=this._statusEnumType.ERROR,t.allContextChangesSettled){let t=`Error running ${c}'s context change handler: ${null==r?void 0:r.message}`;null==(l=this._logger)||l.error(`${t}`,r),this.getAssociatedEventEmitters(e).forEach(r=>{null==r||r.emit(I.ClientProviderEvents.Error,{clientName:e,domain:e,providerName:c,message:t})}),null==(u=this._apiEmitter)||u.emit(I.ClientProviderEvents.Error,{clientName:e,domain:e,providerName:c,message:t})}}})}},X=q.getInstance();a=r(39219),s=e.exports,R(C,a,"default"),s&&R(s,a,"default")},24227:function(e,t,r){"use strict";function n(e){function t(e,t){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=t}return t.prototype=Error(),t.prototype.name=e,t.prototype.constructor=t,t}r.r(t),r.d(t,{basicLogger:function(){return ty},createConsoleLogger:function(){return tO},default:function(){return tR},initialize:function(){return tE},version:function(){return tb}});let o=n("LaunchDarklyUnexpectedResponseError"),i=n("LaunchDarklyInvalidEnvironmentIdError"),a=n("LaunchDarklyInvalidUserError"),s=n("LaunchDarklyInvalidEventKeyError"),l=n("LaunchDarklyInvalidArgumentError"),u=n("LaunchDarklyFlagFetchError");for(var c={LDUnexpectedResponseError:o,LDInvalidEnvironmentIdError:i,LDInvalidUserError:a,LDInvalidEventKeyError:s,LDInvalidArgumentError:l,LDInvalidDataError:n("LaunchDarklyInvalidDataError"),LDFlagFetchError:u,LDTimeoutError:n("LaunchDarklyTimeoutError"),isHttpErrorRecoverable:function(e){return!(e>=400&&e<500)||400===e||408===e||429===e}},d=[],h=[],v=("undefined"!=typeof Uint8Array&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f=0;f<64;++f)d[f]=v[f],h[v.charCodeAt(f)]=f;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63;var g=function(e){for(var t,r=e.length,n=r%3,o=[],i=0,a=r-n;i<a;i+=16383)o.push(function(e,t,r){for(var n,o=[],i=t;i<r;i+=3)o.push(d[(n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]))>>18&63]+d[n>>12&63]+d[n>>6&63]+d[63&n]);return o.join("")}(e,i,i+16383>a?a:i+16383));return 1===n?o.push(d[(t=e[r-1])>>2]+d[t<<4&63]+"=="):2===n&&o.push(d[(t=(e[r-2]<<8)+e[r-1])>>10]+d[t>>4&63]+d[t<<2&63]+"="),o.join("")},p=Array.isArray,m=Object.keys,E=Object.prototype.hasOwnProperty,y=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var n,o,i,a=p(t),s=p(r);if(a&&s){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(a!=s)return!1;var l=t instanceof Date,u=r instanceof Date;if(l!=u)return!1;if(l&&u)return t.getTime()==r.getTime();var c=t instanceof RegExp,d=r instanceof RegExp;if(c!=d)return!1;if(c&&d)return t.toString()==r.toString();var h=m(t);if((o=h.length)!==m(r).length)return!1;for(n=o;0!=n--;)if(!E.call(r,h[n]))return!1;for(n=o;0!=n--;)if(!e(t[i=h[n]],r[i]))return!1;return!0}return t!=t&&r!=r};let O=["key","ip","country","email","firstName","lastName","avatar","name"];function b(e){return g(function(e){let t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}(unescape(encodeURIComponent(e))))}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _,P={appendUrlPath:function(e,t){return(e.endsWith("/")?e.substring(0,e.length-1):e)+(t.startsWith("/")?"":"/")+t},base64URLEncode:function(e){return b(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},btoa:b,clone:function(e){return JSON.parse(JSON.stringify(e))},deepEquals:function(e,t){return y(e,t)},extend:function(...e){return e.reduce((e,t)=>({...e,...t}),{})},getLDUserAgentString:function(e){let t=e.version||"?";return e.userAgent+"/"+t},objectHasOwnProperty:R,onNextTick:function(e){setTimeout(e,0)},sanitizeContext:function(e){let t;return e?(null!==e.kind&&void 0!==e.kind||O.forEach(r=>{let n=e[r];void 0!==n&&"string"!=typeof n&&((t=t||{...e})[r]=String(n))}),t||e):e},transformValuesToVersionedValues:function(e){let t={};for(let r in e)R(e,r)&&(t[r]={value:e[r],version:0});return t},transformVersionedValuesToValues:function(e){let t={};for(let r in e)R(e,r)&&(t[r]=e[r].value);return t},wrapPromiseCallback:function(e,t){let r=e.then(e=>(t&&setTimeout(()=>{t(null,e)},0),e),e=>{if(!t)return Promise.reject(e);setTimeout(()=>{t(e,null)},0)});return t?void 0:r},once:function(e){let t,r=!1;return function(...n){return r||(r=!0,t=e.apply(this,n)),t}}},w=new Uint8Array(16);function C(){if(!_&&!(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(w)}var k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function A(e){return"string"==typeof e&&k.test(e)}for(var D,S,x=[],T=0;T<256;++T)x.push((T+256).toString(16).substr(1));function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(x[e[t+0]]+x[e[t+1]]+x[e[t+2]]+x[e[t+3]]+"-"+x[e[t+4]]+x[e[t+5]]+"-"+x[e[t+6]]+x[e[t+7]]+"-"+x[e[t+8]]+x[e[t+9]]+"-"+x[e[t+10]]+x[e[t+11]]+x[e[t+12]]+x[e[t+13]]+x[e[t+14]]+x[e[t+15]]).toLowerCase();if(!A(r))throw TypeError("Stringified UUID is invalid");return r}var N=0,L=0;function j(e){if(!A(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function F(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=j(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return I(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function H(e){return 14+(e+64>>>9<<4)+1}function V(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function M(e,t,r,n,o,i){var a;return V((a=V(V(t,e),V(n,i)))<<o|a>>>32-o,r)}function U(e,t,r,n,o,i,a){return M(t&r|~t&n,e,t,o,i,a)}function G(e,t,r,n,o,i,a){return M(t&n|r&~n,e,t,o,i,a)}function $(e,t,r,n,o,i,a){return M(t^r^n,e,t,o,i,a)}function Y(e,t,r,n,o,i,a){return M(r^(t|~n),e,t,o,i,a)}function z(e,t){return e<<t|e>>>32-t}var B=Object.freeze({__proto__:null,v1:function(e,t,r){var n=t&&r||0,o=t||Array(16),i=(e=e||{}).node||D,a=void 0!==e.clockseq?e.clockseq:S;if(null==i||null==a){var s=e.random||(e.rng||C)();null==i&&(i=D=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=S=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:L+1,c=l-N+(u-L)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||l>N)&&void 0===e.nsecs&&(u=0),u>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");N=l,L=u,S=a;var d=(1e4*(268435455&(l+=122192928e5))+u)%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=255&d;var h=l/4294967296*1e4&268435455;o[n++]=h>>>8&255,o[n++]=255&h,o[n++]=h>>>24&15|16,o[n++]=h>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(var v=0;v<6;++v)o[n+v]=i[v];return t||I(o)},v3:F("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[H(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=r,l=n,u=o,c=i;r=U(r,n,o,i,e[a],7,-680876936),i=U(i,r,n,o,e[a+1],12,-389564586),o=U(o,i,r,n,e[a+2],17,606105819),n=U(n,o,i,r,e[a+3],22,-1044525330),r=U(r,n,o,i,e[a+4],7,-176418897),i=U(i,r,n,o,e[a+5],12,1200080426),o=U(o,i,r,n,e[a+6],17,-1473231341),n=U(n,o,i,r,e[a+7],22,-45705983),r=U(r,n,o,i,e[a+8],7,1770035416),i=U(i,r,n,o,e[a+9],12,-1958414417),o=U(o,i,r,n,e[a+10],17,-42063),n=U(n,o,i,r,e[a+11],22,-1990404162),r=U(r,n,o,i,e[a+12],7,1804603682),i=U(i,r,n,o,e[a+13],12,-40341101),o=U(o,i,r,n,e[a+14],17,-1502002290),r=G(r,n=U(n,o,i,r,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=G(i,r,n,o,e[a+6],9,-1069501632),o=G(o,i,r,n,e[a+11],14,643717713),n=G(n,o,i,r,e[a],20,-373897302),r=G(r,n,o,i,e[a+5],5,-701558691),i=G(i,r,n,o,e[a+10],9,38016083),o=G(o,i,r,n,e[a+15],14,-660478335),n=G(n,o,i,r,e[a+4],20,-405537848),r=G(r,n,o,i,e[a+9],5,568446438),i=G(i,r,n,o,e[a+14],9,-1019803690),o=G(o,i,r,n,e[a+3],14,-187363961),n=G(n,o,i,r,e[a+8],20,1163531501),r=G(r,n,o,i,e[a+13],5,-1444681467),i=G(i,r,n,o,e[a+2],9,-51403784),o=G(o,i,r,n,e[a+7],14,1735328473),r=$(r,n=G(n,o,i,r,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=$(i,r,n,o,e[a+8],11,-2022574463),o=$(o,i,r,n,e[a+11],16,1839030562),n=$(n,o,i,r,e[a+14],23,-35309556),r=$(r,n,o,i,e[a+1],4,-1530992060),i=$(i,r,n,o,e[a+4],11,1272893353),o=$(o,i,r,n,e[a+7],16,-155497632),n=$(n,o,i,r,e[a+10],23,-1094730640),r=$(r,n,o,i,e[a+13],4,681279174),i=$(i,r,n,o,e[a],11,-358537222),o=$(o,i,r,n,e[a+3],16,-722521979),n=$(n,o,i,r,e[a+6],23,76029189),r=$(r,n,o,i,e[a+9],4,-640364487),i=$(i,r,n,o,e[a+12],11,-421815835),o=$(o,i,r,n,e[a+15],16,530742520),r=Y(r,n=$(n,o,i,r,e[a+2],23,-995338651),o,i,e[a],6,-198630844),i=Y(i,r,n,o,e[a+7],10,1126891415),o=Y(o,i,r,n,e[a+14],15,-1416354905),n=Y(n,o,i,r,e[a+5],21,-57434055),r=Y(r,n,o,i,e[a+12],6,1700485571),i=Y(i,r,n,o,e[a+3],10,-1894986606),o=Y(o,i,r,n,e[a+10],15,-1051523),n=Y(n,o,i,r,e[a+1],21,-2054922799),r=Y(r,n,o,i,e[a+8],6,1873313359),i=Y(i,r,n,o,e[a+15],10,-30611744),o=Y(o,i,r,n,e[a+6],15,-1560198380),n=Y(n,o,i,r,e[a+13],21,1309151649),r=Y(r,n,o,i,e[a+4],6,-145523070),i=Y(i,r,n,o,e[a+11],10,-1120210379),o=Y(o,i,r,n,e[a+2],15,718787259),n=Y(n,o,i,r,e[a+9],21,-343485551),r=V(r,s),n=V(n,l),o=V(o,u),i=V(i,c)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(H(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}),v4:function(e,t,r){var n=(e=e||{}).random||(e.rng||C)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return I(n)},v5:F("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=Array(a),l=0;l<a;++l){for(var u=new Uint32Array(16),c=0;c<16;++c)u[c]=e[64*l+4*c]<<24|e[64*l+4*c+1]<<16|e[64*l+4*c+2]<<8|e[64*l+4*c+3];s[l]=u}s[a-1][14]=8*(e.length-1)/4294967296,s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<a;++d){for(var h=new Uint32Array(80),v=0;v<16;++v)h[v]=s[d][v];for(var f=16;f<80;++f)h[f]=z(h[f-3]^h[f-8]^h[f-14]^h[f-16],1);for(var g=r[0],p=r[1],m=r[2],E=r[3],y=r[4],O=0;O<80;++O){var b=Math.floor(O/20),R=z(g,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(b,p,m,E)+y+t[b]+h[O]>>>0;y=E,E=m,m=z(p,30)>>>0,p=g,g=R}r[0]=r[0]+g>>>0,r[1]=r[1]+p>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+E>>>0,r[4]=r[4]+y>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}),NIL:"00000000-0000-0000-0000-000000000000",version:function(e){if(!A(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)},validate:A,stringify:I,parse:j});let K=["debug","info","warn","error","none"];var W={commonBasicLogger:function(e,t){if(e&&e.destination&&"function"!=typeof e.destination)throw Error("destination for basicLogger was set to a non-function");function r(e){return function(t){console&&console[e]&&console[e].call(console,t)}}let n=e&&e.destination?[e.destination,e.destination,e.destination,e.destination]:[r("log"),r("info"),r("warn"),r("error")],o=!(!e||!e.destination),i=e&&void 0!==e.prefix&&null!==e.prefix?e.prefix:"[LaunchDarkly] ",a=1;if(e&&e.level)for(let t=0;t<K.length;t++)K[t]===e.level&&(a=t);let s={};for(let e=0;e<K.length;e++){let r=K[e];if("none"!==r){if(e<a)s[r]=()=>{};else{let a=e;s[r]=function(){!function(e,r,a){let s;if(a.length<1)return;let l=o?r+": "+i:i;if(1!==a.length&&t){let e=[...a];e[0]=l+e[0],s=t(...e)}else s=l+a[0];try{n[e](s)}catch(e){console&&console.log&&console.log("[LaunchDarkly] Configured logger's "+r+" method threw an exception: "+e)}}(a,r,arguments)}}}}return s},validateLogger:function(e){K.forEach(t=>{if("none"!==t&&(!e[t]||"function"!=typeof e[t]))throw Error("Provided logger instance must support logger."+t+"(...) method")})}};function q(e){return e&&e.message?e.message:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}let X=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initialize-the-client for instructions on SDK initialization.";var J={bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},bootstrapOldFormat:function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+X},clientInitialized:function(){return"LaunchDarkly client initialized"},debugEnqueueingEvent:function(e){return'enqueueing "'+e+'" event'},debugPostingDiagnosticEvent:function(e){return"sending diagnostic event ("+e.kind+")"},debugPostingEvents:function(e){return"sending "+e+" events"},debugStreamDelete:function(e){return'received streaming deletion for flag "'+e+'"'},debugStreamDeleteIgnored:function(e){return'received streaming deletion for flag "'+e+'" but ignored due to version check'},debugStreamPatch:function(e){return'received streaming update for flag "'+e+'"'},debugStreamPatchIgnored:function(e){return'received streaming update for flag "'+e+'" but ignored due to version check'},debugStreamPing:function(){return"received ping message from stream"},debugPolling:function(e){return"polling for feature flags at "+e},debugStreamPut:function(){return"received streaming update for all flags"},deprecated:function(e,t){return t?'"'+e+'" is deprecated, please use "'+t+'"':'"'+e+'" is deprecated'},environmentNotFound:function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+X},environmentNotSpecified:function(){return"No environment/client-side ID was specified."+X},errorFetchingFlags:function(e){return"Error fetching flag settings: "+q(e)},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutContext:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},httpErrorMessage:function(e,t,r){return"Received error "+e+(401===e?" (invalid SDK key)":"")+" for "+t+" - "+(c.isHttpErrorRecoverable(e)?r:"giving up permanently")},httpUnavailable:function(){return"Cannot make HTTP requests in this environment."+X},identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},inspectorMethodError:(e,t)=>`an inspector: "${t}" of type: "${e}" generated an exception`,invalidContentType:function(e){return'Expected application/json content type but got "'+e+'"'},invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},invalidInspector:(e,t)=>`an inspector: "${t}" of an invalid type (${e}) was configured`,invalidMetricValue:e=>`The track function was called with a non-numeric "metricValue" (${e}), only numeric metric values are supported.`,invalidContext:function(){return"Invalid context specified."+X},invalidTagValue:e=>`Config option "${e}" must only contain letters, numbers, ., _ or -.`,localStorageUnavailable:function(e){return"local storage is unavailable: "+q(e)},networkError:e=>"network error"+(e?" ("+e+")":""),optionBelowMinimum:(e,t,r)=>'Config option "'+e+'" was set to '+t+", changing to minimum value of "+r,streamClosing:function(){return"Closing stream connection"},streamConnecting:function(e){return"Opening stream connection to "+e},streamError:function(e,t){return"Error on stream connection: "+q(e)+", will continue retrying after "+t+" milliseconds."},tagValueTooLong:e=>`Value of "${e}" was longer than 64 characters and was discarded.`,unknownCustomEventKey:function(e){return'Custom event "'+e+'" does not exist'},unknownOption:e=>'Ignoring unknown config option "'+e+'"',contextNotSpecified:function(){return"No context specified."+X},unrecoverableStreamError:e=>`Error on stream connection ${q(e)}, giving up permanently`,wrongOptionType:(e,t,r)=>'Config option "'+e+'" should be of type '+t+", got "+r+", using default value",wrongOptionTypeBoolean:(e,t)=>'Config option "'+e+'" should be a boolean, got '+t+", converting to boolean"};let{validateLogger:Q}=W,Z={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributes:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},application:{validator:function(e,t,r){let n={};return t.id&&(n.id=er(`${e}.id`,t.id,r)),t.version&&(n.version=er(`${e}.version`,t.version,r)),n}},inspectors:{default:[]},hooks:{default:[]},plugins:{default:[]}},ee=/^(\w|\.|-)+$/;function et(e){return e&&e.replace(/\/+$/,"")}function er(e,t,r){if("string"==typeof t&&t.match(ee)){if(!(t.length>64))return t;r.warn(J.tagValueTooLong(e))}else r.warn(J.invalidTagValue(e))}var en={baseOptionDefs:Z,validate:function(e,t,r,n){var o;let i=P.extend({logger:{default:n}},Z,r),a={};function s(e){P.onNextTick(()=>{t&&t.maybeReportError(new c.LDInvalidArgumentError(e))})}let l=P.extend({},e||{});return o=l,Object.keys(a).forEach(e=>{if(void 0!==o[e]){let t=a[e];n&&n.warn(J.deprecated(e,t)),t&&(void 0===o[t]&&(o[t]=o[e]),delete o[e])}}),Q((l=function(e){let t=P.extend({},e),r=e=>{if(null===e)return"any";if(void 0===e)return;if(Array.isArray(e))return"array";let t=typeof e;return"boolean"===t||"string"===t||"number"===t||"function"===t?t:"object"};return Object.keys(e).forEach(o=>{let a=e[o];if(null!=a){let l=i[o];if(void 0===l)s(J.unknownOption(o));else{let i=l.type||r(l.default),u=l.validator;if(u){let r=u(o,e[o],n);void 0!==r?t[o]=r:delete t[o]}else if("any"!==i){let e=i.split("|"),n=r(a);0>e.indexOf(n)?"boolean"===i?(t[o]=!!a,s(J.wrongOptionTypeBoolean(o,n))):(s(J.wrongOptionType(o,i,n)),t[o]=l.default):"number"===n&&void 0!==l.minimum&&a<l.minimum&&(s(J.optionBelowMinimum(o,a,l.minimum)),t[o]=l.minimum)}}}}),t.baseUrl=et(t.baseUrl),t.streamUrl=et(t.streamUrl),t.eventsUrl=et(t.eventsUrl),t}(l=function(e){let t=P.extend({},e);return Object.keys(i).forEach(e=>{void 0!==t[e]&&null!==t[e]||(t[e]=i[e]&&i[e].default)}),t}(l))).logger),l},getTags:function(e){let t={};return e&&(e.application&&void 0!==e.application.id&&null!==e.application.id&&(t["application-id"]=[e.application.id]),e.application&&void 0!==e.application.version&&null!==e.application.id&&(t["application-version"]=[e.application.version])),t}};let{getLDUserAgentString:eo}=P;var ei={getLDHeaders:function(e,t){if(t&&!t.sendLDHeaders)return{};let r={};r[e.userAgentHeaderName||"User-Agent"]=eo(e),t&&t.wrapperName&&(r["X-LaunchDarkly-Wrapper"]=t.wrapperVersion?t.wrapperName+"/"+t.wrapperVersion:t.wrapperName);let n=en.getTags(t),o=Object.keys(n);return o.length&&(r["x-launchdarkly-tags"]=o.sort().map(e=>Array.isArray(n[e])?n[e].sort().map(t=>`${e}/${t}`):[`${e}/${n[e]}`]).reduce((e,t)=>e.concat(t),[]).join(" ")),r},transformHeaders:function(e,t){return t&&t.requestHeaderTransform?t.requestHeaderTransform({...e}):e}};let{v1:ea}=B,{getLDHeaders:es,transformHeaders:el}=ei;var eu=function(e,t,r){let n=P.extend({"Content-Type":"application/json"},es(e,r)),o={};return o.sendEvents=(t,o,i)=>{if(!e.httpRequest)return Promise.resolve();let a=JSON.stringify(t),s=i?null:ea();return(function t(l){let u=i?n:P.extend({},n,{"X-LaunchDarkly-Event-Schema":"4","X-LaunchDarkly-Payload-ID":s});return e.httpRequest("POST",o,el(u,r),a).promise.then(e=>{if(e)return e.status>=400&&c.isHttpErrorRecoverable(e.status)&&l?t(!1):function(e){let t={status:e.status},r=e.header("date");if(r){let e=Date.parse(r);e&&(t.serverTime=e)}return t}(e)}).catch(()=>l?t(!1):Promise.reject())})(!0).catch(()=>{})},o},ec=function e(t,r=[]){if(null===t||"object"!=typeof t)return JSON.stringify(t);if(r.includes(t))throw Error("Cycle detected");return Array.isArray(t)?`[${t.map(n=>e(n,[...r,t])).map(e=>void 0===e?"null":e).join(",")}]`:`{${Object.keys(t).sort().map(n=>{let o=e(t[n],[...r,t]);if(void 0!==o)return`${JSON.stringify(n)}:${o}`}).filter(e=>void 0!==e).join(",")}}`};let{commonBasicLogger:ed}=W;function eh(e){return"string"==typeof e&&"kind"!==e&&e.match(/^(\w|\.|-)+$/)}function ev(e){return e.includes("%")||e.includes(":")?e.replace(/%/g,"%25").replace(/:/g,"%3A"):e}var ef={checkContext:function(e,t){if(e){if(t&&(void 0===e.kind||null===e.kind))return void 0!==e.key&&null!==e.key;let r=e.key,n=void 0===e.kind?"user":e.kind,o=eh(n),i="multi"===n||null!=r&&""!==r;if("multi"===n){let t=Object.keys(e).filter(e=>"kind"!==e);return i&&t.every(e=>eh(e))&&t.every(t=>{let r=e[t].key;return null!=r&&""!==r})}return i&&o}return!1},getContextKeys:function(e,t=ed()){if(!e)return;let r={},{kind:n,key:o}=e;switch(n){case void 0:r.user=`${o}`;break;case"multi":Object.entries(e).filter(([e])=>"kind"!==e).forEach(([e,t])=>{t&&t.key&&(r[e]=t.key)});break;case null:t.warn(`null is not a valid context kind: ${e}`);break;case"":t.warn(`'' is not a valid context kind: ${e}`);break;default:r[n]=`${o}`}return r},getContextKinds:function(e){return e?null===e.kind||void 0===e.kind?["user"]:"multi"!==e.kind?[e.kind]:Object.keys(e).filter(e=>"kind"!==e):[]},getCanonicalKey:function(e){if(e){if((void 0===e.kind||null===e.kind||"user"===e.kind)&&e.key)return e.key;if("multi"!==e.kind&&e.key)return`${e.kind}:${ev(e.key)}`;if("multi"===e.kind)return Object.keys(e).sort().filter(e=>"kind"!==e).map(t=>`${t}:${ev(e[t].key)}`).join(":")}}};let{getContextKinds:eg}=ef;var ep=function(){let e={},t=0,r=0,n={},o={};return e.summarizeEvent=e=>{if("feature"===e.kind){let i=e.key+":"+(null!==e.variation&&void 0!==e.variation?e.variation:"")+":"+(null!==e.version&&void 0!==e.version?e.version:""),a=n[i],s=o[e.key];s||(s=new Set,o[e.key]=s),(e.context?eg(e.context):e.contextKeys?Object.keys(e.contextKeys):[]).forEach(e=>s.add(e)),a?a.count=a.count+1:n[i]={count:1,key:e.key,version:e.version,variation:e.variation,value:e.value,default:e.default},(0===t||e.creationDate<t)&&(t=e.creationDate),e.creationDate>r&&(r=e.creationDate)}},e.getSummary=()=>{let e={},i=!0;for(let t of Object.values(n)){let r=e[t.key];r||(r={default:t.default,counters:[],contextKinds:[...o[t.key]]},e[t.key]=r);let n={value:t.value,count:t.count};void 0!==t.variation&&null!==t.variation&&(n.variation=t.variation),void 0!==t.version&&null!==t.version?n.version=t.version:n.unknown=!0,r.counters.push(n),i=!1}return i?null:{startDate:t,endDate:r,features:e,kind:"summary"}},e.clearSummary=()=>{t=0,r=0,n={},o={}},e},em=function(e){let t={},r={};return{summarizeEvent:function(e){if("feature"===e.kind){let n=ec(e.context);if(!n)return;let o=t[n];o||(t[n]=ep(),o=t[n],r[n]=e.context),o.summarizeEvent(e)}},getSummaries:function(){let n=t,o=r;return t={},r={},Object.entries(n).map(([t,r])=>{let n=r.getSummary();return n.context=e.filter(o[t]),n})}}};function eE(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function ey(e){return(e.startsWith("/")?e.substring(1):e).split("/").map(e=>e.indexOf("~")>=0?e.replace(/~1/g,"/").replace(/~0/g,"~"):e)}function eO(e){return!e.startsWith("/")}function eb(e,t){let r=eO(e),n=eO(t);if(r&&n)return e===t;if(r){let r=ey(t);return 1===r.length&&e===r[0]}if(n){let r=ey(e);return 1===r.length&&t===r[0]}return e===t}function eR(e){return`/${eE(e)}`}var e_={cloneExcluding:function(e,t){let r=[],n={},o=[];for(r.push(...Object.keys(e).map(t=>({key:t,ptr:eR(t),source:e,parent:n,visited:[e]})));r.length;){let e=r.pop();if(t.some(t=>eb(t,e.ptr)))o.push(e.ptr);else{let t=e.source[e.key];if(null===t)e.parent[e.key]=t;else if(Array.isArray(t))e.parent[e.key]=[...t];else if("object"==typeof t){if(e.visited.includes(t))continue;e.parent[e.key]={},r.push(...Object.keys(t).map(r=>{var n,o;return{key:r,ptr:(n=e.ptr,o=eE(r),`${n}/${o}`),source:t,parent:e.parent[e.key],visited:[...e.visited,t]}}))}else e.parent[e.key]=t}}return{cloned:n,excluded:o.sort()}},compare:eb,literalToReference:eR},eP=function(e){let t={},r=e.allAttributesPrivate,n=e.privateAttributes||[],o=["key","kind","_meta","anonymous"],i=["name","ip","firstName","lastName","email","avatar","country"],a=(e,t)=>{if("object"!=typeof e||null===e||Array.isArray(e))return;let{cloned:i,excluded:a}=e_.cloneExcluding(e,(r||t&&e.anonymous?Object.keys(e):[...n,...e._meta&&e._meta.privateAttributes||[]]).filter(e=>!o.some(t=>e_.compare(e,t))));return i.key=String(i.key),a.length&&(i._meta||(i._meta={}),i._meta.redactedAttributes=a),i._meta&&(delete i._meta.privateAttributes,0===Object.keys(i._meta).length&&delete i._meta),void 0!==i.anonymous&&(i.anonymous=!!i.anonymous),i};return t.filter=(e,t=!1)=>void 0===e.kind||null===e.kind?a((e=>{let t={...e.custom||{},kind:"user",key:e.key};for(let r of(void 0!==e.anonymous&&(t.anonymous=!!e.anonymous),i))delete t[r],void 0!==e[r]&&null!==e[r]&&(t[r]=String(e[r]));return void 0!==e.privateAttributeNames&&null!==e.privateAttributeNames&&(t._meta=t._meta||{},t._meta.privateAttributes=e.privateAttributeNames.map(e=>e.startsWith("/")?e_.literalToReference(e):e)),t})(e),t):"multi"===e.kind?((e,t)=>{let r={kind:e.kind};for(let n of Object.keys(e))if("kind"!==n){let o=a(e[n],t);o&&(r[n]=o)}return r})(e,t):a(e,t),t};let{getContextKeys:ew}=ef;var eC=function(e,t,r,n=null,o=null,i=null){let a={},s=i||eu(e,r,t),l=P.appendUrlPath(t.eventsUrl,"/events/bulk/"+r),u=eP(t),d=em(u),h=t.samplingInterval,v=t.eventCapacity,f=t.flushInterval,g=t.logger,p,m=[],E=0,y=!1,O=!1;function b(){return 0===h||0===Math.floor(Math.random()*h)}function R(e){m.length<v?(m.push(e),O=!1):(O||(O=!0,g.warn(J.eventCapacityExceeded())),n&&n.incrementDroppedEvents())}return a.enqueue=function(e){if(y)return;let t=!1,r=!1;if(d.summarizeEvent(e),"feature"===e.kind?b()&&(t=!!e.trackEvents,r=!!e.debugEventsUntilDate&&e.debugEventsUntilDate>E&&e.debugEventsUntilDate>(new Date).getTime()):t=b(),t&&R(function(e){let t=P.extend({},e);return"identify"===e.kind||"feature"===e.kind||"custom"===e.kind?t.context=u.filter(e.context):(t.contextKeys=ew(e.context,g),delete t.context),"feature"===e.kind&&(delete t.trackEvents,delete t.debugEventsUntilDate),t}(e)),r){let t=P.extend({},e,{kind:"debug"});t.context=u.filter(t.context),delete t.trackEvents,delete t.debugEventsUntilDate,R(t)}},a.flush=async function(){if(y)return Promise.resolve();let e=m;return d.getSummaries().forEach(t=>{Object.keys(t.features).length&&e.push(t)}),n&&n.setEventsInLastBatch(e.length),0===e.length?Promise.resolve():(m=[],g.debug(J.debugPostingEvents(e.length)),s.sendEvents(e,l).then(e=>{e&&(e.serverTime&&(E=e.serverTime),c.isHttpErrorRecoverable(e.status)||(y=!0),e.status>=400&&P.onNextTick(()=>{o.maybeReportError(new c.LDUnexpectedResponseError(J.httpErrorMessage(e.status,"event posting","some events were dropped")))}))}))},a.start=function(){let e=()=>{a.flush(),p=setTimeout(e,f)};p=setTimeout(e,f)},a.stop=function(){clearTimeout(p)},a},ek=function(e){let t={},r={};return t.on=function(e,t,n){r[e]=r[e]||[],r[e]=r[e].concat({handler:t,context:n})},t.off=function(e,t,n){if(r[e])for(let o=0;o<r[e].length;o++)r[e][o].handler===t&&r[e][o].context===n&&(r[e]=r[e].slice(0,o).concat(r[e].slice(o+1)))},t.emit=function(e){if(!r[e])return;let t=r[e].slice(0);for(let e=0;e<t.length;e++)t[e].handler.apply(t[e].context,Array.prototype.slice.call(arguments,1))},t.getEvents=function(){return Object.keys(r)},t.getEventListenerCount=function(e){return r[e]?r[e].length:0},t.maybeReportError=function(t){t&&(r.error?this.emit("error",t):(e||console).error(t.message))},t};let eA="ready",eD="initialized",eS="failed";var ex=function(e){let t=!1,r=!1,n=null,o=null,i=new Promise(t=>{let r=()=>{e.off(eA,r),t()};e.on(eA,r)}).catch(()=>{});return{getInitializationPromise:()=>o||(t?Promise.resolve():r?Promise.reject(n):o=new Promise((t,r)=>{let n=()=>{e.off(eD,n),t()},o=t=>{e.off(eS,o),r(t)};e.on(eD,n),e.on(eS,o)})),getReadyPromise:()=>i,signalSuccess:()=>{t||r||(t=!0,e.emit(eD),e.emit(eA))},signalFailure:o=>{t||r||(r=!0,n=o,e.emit(eS,o),e.emit(eA)),e.maybeReportError(o)}}},eT=function(e,t,r,n){let o={};function i(){let e="",o=n.getContext();return o&&(e=r||P.btoa(JSON.stringify(o))),"ld:"+t+":"+e}return o.loadFlags=()=>e.get(i()).then(e=>{if(null==e)return null;try{let t=JSON.parse(e);if(t){let e=t.$schema;void 0===e||e<1?t=P.transformValuesToVersionedValues(t):delete t.$schema}return t}catch(e){return o.clearFlags().then(()=>null)}}),o.saveFlags=t=>{let r=P.extend({},t,{$schema:1});return e.set(i(),JSON.stringify(r))},o.clearFlags=()=>e.clear(i()),o},eI=function(e,t){let r={},n=!1,o=e=>{n||(n=!0,t.warn(J.localStorageUnavailable(e)))};return r.isEnabled=()=>!!e,r.get=t=>new Promise(r=>{e?e.get(t).then(r).catch(e=>{o(e),r(void 0)}):r(void 0)}),r.set=(t,r)=>new Promise(n=>{e?e.set(t,r).then(()=>n(!0)).catch(e=>{o(e),n(!1)}):n(!1)}),r.clear=t=>new Promise(r=>{e?e.clear(t).then(()=>r(!0)).catch(e=>{o(e),r(!1)}):r(!1)}),r};let{appendUrlPath:eN,base64URLEncode:eL,objectHasOwnProperty:ej}=P,{getLDHeaders:eF,transformHeaders:eH}=ei,{isHttpErrorRecoverable:eV}=c;var eM=function(e,t,r,n){let o=t.streamUrl,i=t.logger,a={},s=eN(o,"/eval/"+r),l=t.useReport,u=t.evaluationReasons,c=t.streamReconnectDelay,d=eF(e,t),h,v=!1,f=null,g=null,p=null,m=null,E=null,y=0;function O(e){if(e.status&&"number"==typeof e.status&&!eV(e.status))return _(),i.error(J.unrecoverableStreamError(e)),void(g&&(clearTimeout(g),g=null));let t=function(){var e;let t=(e=function(){let e=c*Math.pow(2,y);return e>3e4?3e4:e}())-Math.trunc(.5*Math.random()*e);return y+=1,t}();v||(i.warn(J.streamError(e,t)),v=!0),P(!1),_(),b(t)}function b(e){g||(e?g=setTimeout(R,e):R())}function R(){let n;g=null;let a="",c={headers:d,readTimeoutMillis:3e5};if(e.eventSourceFactory){for(let d in null!=m&&(a="h="+m),l?e.eventSourceAllowsReport?(n=s,c.method="REPORT",c.headers["Content-Type"]="application/json",c.body=JSON.stringify(p)):(n=eN(o,"/ping/"+r),a=""):n=s+"/"+eL(JSON.stringify(p)),c.headers=eH(c.headers,t),u&&(a=a+(a?"&":"")+"withReasons=true"),n=n+(a?"?":"")+a,_(),i.info(J.streamConnecting(n)),h=(new Date).getTime(),f=e.eventSourceFactory(n,c),E)ej(E,d)&&f.addEventListener(d,E[d]);f.onerror=O,f.onopen=()=>{y=0}}}function _(){f&&(i.info(J.streamClosing()),f.close(),f=null)}function P(e){h&&n&&n.recordStreamInit(h,!e,(new Date).getTime()-h),h=null}return a.connect=function(e,t,r){for(let n in p=e,m=t,E={},r||{})E[n]=function(e){v=!1,P(!0),r[n]&&r[n](e)};b()},a.disconnect=function(){clearTimeout(g),g=null,_()},a.isConnected=function(){return!!(f&&e.eventSourceIsActive&&e.eventSourceIsActive(f))},a},eU=function(e){let t,r,n,o;let i={addPromise:(i,a)=>{t=i,r&&r(),r=a,i.then(r=>{t===i&&(n(r),e&&e())},r=>{t===i&&(o(r),e&&e())})}};return i.resultPromise=new Promise((e,t)=>{n=e,o=t}),i};let{transformHeaders:eG,getLDHeaders:e$}=ei,eY="application/json";var ez=function(e,t,r){let n=t.baseUrl,o=t.useReport,i=t.evaluationReasons,a=t.logger,s={},l={};function u(r,n){if(!e.httpRequest)return new Promise((e,t)=>{t(new c.LDFlagFetchError(J.httpUnavailable()))});let o=e$(e,t);n&&(o["Content-Type"]=eY);let i=l[r];i||(i=eU(()=>{delete l[r]}),l[r]=i);let a=e.httpRequest(n?"REPORT":"GET",r,eG(o,t),n),s=a.promise.then(e=>{if(200===e.status){if(e.header("content-type")&&e.header("content-type").substring(0,16)===eY)return JSON.parse(e.body);{let t=J.invalidContentType(e.header("content-type")||"");return Promise.reject(new c.LDFlagFetchError(t))}}return Promise.reject(404===e.status?new c.LDInvalidEnvironmentIdError(J.environmentNotFound()):new c.LDFlagFetchError(J.errorFetchingFlags(e.statusText||String(e.status))))},e=>Promise.reject(new c.LDFlagFetchError(J.networkError(e))));return i.addPromise(s,()=>{a.cancel&&a.cancel()}),i.resultPromise}return s.fetchJSON=function(e){return u(P.appendUrlPath(n,e),null)},s.fetchFlagSettings=function(e,t){let s,l,c="";return o?(s=[n,"/sdk/evalx/",r,"/context"].join(""),l=JSON.stringify(e)):s=[n,"/sdk/evalx/",r,"/contexts/",P.base64URLEncode(JSON.stringify(e))].join(""),t&&(c="h="+t),i&&(c=c+(c?"&":"")+"withReasons=true"),s=s+(c?"?":"")+c,a.debug(J.debugPolling(s)),u(s,l)},s},eB=function(e,t){let r;let n={};return n.setContext=function(e){(r=P.sanitizeContext(e))&&t&&t(P.clone(r))},n.getContext=function(){return r?P.clone(r):null},e&&n.setContext(e),n};let{v1:eK}=B,{getContextKinds:eW}=ef;var eq=function(e){function t(e){return null==e||"user"===e?"ld:$anonUserId":`ld:$contextKey:${e}`}function r(r,n){return null!==n.key&&void 0!==n.key?(n.key=n.key.toString(),Promise.resolve(n)):n.anonymous?e.get(t(r)).then(o=>{if(o)return n.key=o,n;{let o=eK();return n.key=o,e.set(t(r),o).then(()=>n)}}):Promise.reject(new c.LDInvalidUserError(J.invalidContext()))}this.processContext=e=>{if(!e)return Promise.reject(new c.LDInvalidUserError(J.contextNotSpecified()));let t=P.clone(e);return"multi"===e.kind?Promise.all(eW(t).map(e=>r(e,t[e]))).then(()=>t):r(e.kind,t)}};let{v1:eX}=B,{baseOptionDefs:eJ}=en,{appendUrlPath:eQ}=P;var eZ={DiagnosticId:function(e){let t={diagnosticId:eX()};return e&&(t.sdkKeySuffix=e.length>6?e.substring(e.length-6):e),t},DiagnosticsAccumulator:function(e){let t,r,n,o;function i(e){t=e,r=0,n=0,o=[]}return i(e),{getProps:()=>({dataSinceDate:t,droppedEvents:r,eventsInLastBatch:n,streamInits:o}),setProps:e=>{t=e.dataSinceDate,r=e.droppedEvents||0,n=e.eventsInLastBatch||0,o=e.streamInits||[]},incrementDroppedEvents:()=>{r++},setEventsInLastBatch:e=>{n=e},recordStreamInit:(e,t,r)=>{o.push({timestamp:e,failed:t,durationMillis:r})},reset:i}},DiagnosticsManager:function(e,t,r,n,o,i,a){let s=!!e.diagnosticUseCombinedEvent,l="ld:"+o+":$diagnostics",u=eQ(i.eventsUrl,"/events/diagnostic/"+o),c=i.diagnosticRecordingInterval,d,h,v=!!i.streaming,f={};function g(){return{sdk:function(){let t={...e.diagnosticSdkData};return i.wrapperName&&(t.wrapperName=i.wrapperName),i.wrapperVersion&&(t.wrapperVersion=i.wrapperVersion),t}(),configuration:{customBaseURI:i.baseUrl!==eJ.baseUrl.default,customStreamURI:i.streamUrl!==eJ.streamUrl.default,customEventsURI:i.eventsUrl!==eJ.eventsUrl.default,eventsCapacity:i.eventCapacity,eventsFlushIntervalMillis:i.flushInterval,reconnectTimeMillis:i.streamReconnectDelay,streamingDisabled:!v,allAttributesPrivate:!!i.allAttributesPrivate,diagnosticRecordingIntervalMillis:i.diagnosticRecordingInterval,usingSecureMode:!!i.hash,bootstrapMode:!!i.bootstrap,fetchGoalsDisabled:!i.fetchGoals,sendEventsOnlyForVariation:!!i.sendEventsOnlyForVariation},platform:e.diagnosticPlatformData}}function p(e){i.logger&&i.logger.debug(J.debugPostingDiagnosticEvent(e)),n.sendEvents(e,u,!0).then(()=>{}).catch(()=>{})}function m(){p(function(){let e=(new Date).getTime(),t={kind:s?"diagnostic-combined":"diagnostic",id:a,creationDate:e,...r.getProps()};return s&&(t={...t,...g()}),r.reset(e),t}()),h=setTimeout(m,c),d=(new Date).getTime(),s&&function(){if(t.isEnabled()){let e={...r.getProps()};t.set(l,JSON.stringify(e))}}()}return f.start=()=>{s?function(e){if(!t.isEnabled())return e(!1);t.get(l).then(t=>{if(t)try{let e=JSON.parse(t);r.setProps(e),d=e.dataSinceDate}catch(e){}e(!0)}).catch(()=>{e(!1)})}(e=>{if(e){let e=(d||0)+c,t=(new Date).getTime();t>=e?m():h=setTimeout(m,e-t)}else 0===Math.floor(4*Math.random())?m():h=setTimeout(m,c)}):(p({kind:"diagnostic-init",id:a,creationDate:r.getProps().dataSinceDate,...g()}),h=setTimeout(m,c))},f.stop=()=>{h&&clearTimeout(h)},f.setStreaming=e=>{v=e},f}},e0=function(e,t){let r=!1,n={type:e.type,name:e.name,synchronous:e.synchronous,method:(...o)=>{try{e.method(...o)}catch{r||(r=!0,t.warn(J.inspectorMethodError(n.type,n.name)))}}};return n};let{onNextTick:e1}=P,e2={flagUsed:"flag-used",flagDetailsChanged:"flag-details-changed",flagDetailChanged:"flag-detail-changed",clientIdentityChanged:"client-identity-changed"};Object.freeze(e2);let{LDTimeoutError:e5}=c,e3="unknown hook";function e4(e,t,r,n,o){try{return n()}catch(n){return e?.error(`An error was encountered in "${t}" of the "${r}" hook: ${n}`),o}}function e6(e,t){try{return t.getMetadata().name||e3}catch{return e.error("Exception thrown getting metadata for hook. Unable to get hook name."),e3}}var e8=function(e,t){let r=t?[...t]:[];return{withEvaluation:function(t,n,o,i){if(0===r.length)return i();let a=[...r],s={flagKey:t,context:n,defaultValue:o},l=a.map(t=>e4(e,"beforeEvaluation",e6(e,t),()=>t?.beforeEvaluation?.(s,{})??{},{})),u=i();return function(e,t,r,n,o){for(let i=t.length-1;i>=0;i-=1){let a=t[i],s=n[i];e4(e,"afterEvaluation",e6(e,a),()=>a?.afterEvaluation?.(r,s,o)??{},{})}}(e,a,s,l,u),u},identify:function(t,n){let o=[...r],i={context:t,timeout:n},a=o.map(t=>e4(e,"beforeIdentify",e6(e,t),()=>t?.beforeIdentify?.(i,{})??{},{}));return t=>{!function(e,t,r,n,o){for(let i=t.length-1;i>=0;i-=1){let a=t[i],s=n[i];e4(e,"afterIdentify",e6(e,a),()=>a?.afterIdentify?.(r,s,o)??{},{})}}(e,o,i,a,t)}},addHook:function(e){r.push(e)},afterTrack:function(t){0!==r.length&&function(e,t,r){for(let n=t.length-1;n>=0;n-=1){let o=t[n];e4(e,"afterTrack",e6(e,o),()=>o?.afterTrack?.(r),void 0)}}(e,[...r],t)}}};let e9="unknown plugin";function e7(e,t){try{return t.getMetadata().name||e9}catch(t){return e.error("Exception thrown getting metadata for plugin. Unable to get plugin name."),e9}}let{commonBasicLogger:te}=W,{checkContext:tt,getContextKeys:tr}=ef,{InspectorTypes:tn,InspectorManager:to}={InspectorTypes:e2,InspectorManager:function(e,t){let r={},n={[e2.flagUsed]:[],[e2.flagDetailsChanged]:[],[e2.flagDetailChanged]:[],[e2.clientIdentityChanged]:[]},o={[e2.flagUsed]:[],[e2.flagDetailsChanged]:[],[e2.flagDetailChanged]:[],[e2.clientIdentityChanged]:[]},i=e&&e.map(e=>e0(e,t));return i&&i.forEach(e=>{Object.prototype.hasOwnProperty.call(n,e.type)&&!e.synchronous?n[e.type].push(e):Object.prototype.hasOwnProperty.call(o,e.type)&&e.synchronous?o[e.type].push(e):t.warn(J.invalidInspector(e.type,e.name))}),r.hasListeners=e=>n[e]&&n[e].length||o[e]&&o[e].length,r.onFlagUsed=(e,t,r)=>{let i=e2.flagUsed;o[i].length&&o[i].forEach(n=>n.method(e,t,r)),n[i].length&&e1(()=>{n[i].forEach(n=>n.method(e,t,r))})},r.onFlags=e=>{let t=e2.flagDetailsChanged;o[t].length&&o[t].forEach(t=>t.method(e)),n[t].length&&e1(()=>{n[t].forEach(t=>t.method(e))})},r.onFlagChanged=(e,t)=>{let r=e2.flagDetailChanged;o[r].length&&o[r].forEach(r=>r.method(e,t)),n[r].length&&e1(()=>{n[r].forEach(r=>r.method(e,t))})},r.onIdentityChanged=e=>{let t=e2.clientIdentityChanged;o[t].length&&o[t].forEach(t=>t.method(e)),n[t].length&&e1(()=>{n[t].forEach(t=>t.method(e))})},r}},{getPluginHooks:ti,registerPlugins:ta,createPluginEnvironment:ts}={getPluginHooks:function(e,t,r){let n=[];return r.forEach(r=>{try{let o=r.getHooks?.(t);void 0===o?e.error(`Plugin ${e7(e,r)} returned undefined from getHooks.`):o&&o.length>0&&n.push(...o)}catch(t){e.error(`Exception thrown getting hooks for plugin ${e7(e,r)}. Unable to get hooks.`)}}),n},registerPlugins:function(e,t,r,n){n.forEach(n=>{try{n.register(r,t)}catch(t){e.error(`Exception thrown registering plugin ${e7(e,n)}.`)}})},createPluginEnvironment:function(e,t,r){let n={};e.userAgent&&(n.name=e.userAgent),e.version&&(n.version=e.version),r.wrapperName&&(n.wrapperName=r.wrapperName),r.wrapperVersion&&(n.wrapperVersion=r.wrapperVersion);let o={};r.application&&(r.application.name&&(o.name=r.application.name),r.application.version&&(o.version=r.application.version));let i={sdk:n,clientSideId:t};return Object.keys(o).length>0&&(i.application=o),i}},tl="change",tu="internal-change";var tc=function(e,t,r,n,o){let i=r&&r.logger?r.logger:o&&o.logger&&o.logger.default||te("warn"),a=ek(i),s=ex(a),l=en.validate(r,a,o,i),u=to(l.inspectors,i),d=l.sendEvents,h=e,v=l.hash,f=[...l.plugins],g=ts(n,e,l),p=ti(i,g,f),m=e8(i,[...l.hooks,...p]),E=eI(n.localStorage,i),y=eu(n,h,l),O=l.sendEvents&&!l.diagnosticOptOut,b=O?eZ.DiagnosticId(h):null,R=O?eZ.DiagnosticsAccumulator((new Date).getTime()):null,_=O?eZ.DiagnosticsManager(n,E,R,y,h,l,b):null,w=eM(n,l,h,R),C=l.eventProcessor||eC(n,l,h,R,a,y),k=ez(n,l,h),A,D,S,x={},T=l.streaming,I=!1,N=!1,L=!0,j=l.stateProvider,F=eB(null,function(e){!j&&e&&M({kind:"identify",context:e,creationDate:(new Date).getTime()}),u.hasListeners(tn.clientIdentityChanged)&&u.onIdentityChanged(F.getContext())}),H=new eq(E),V=E.isEnabled()?eT(E,h,v,F):null;function M(e){h&&(j&&j.enqueueEvent&&j.enqueueEvent(e)||(e.context?(L=!1,!d||N||n.isDoNotTrack()||(i.debug(J.debugEnqueueingEvent(e.kind)),C.enqueue(e))):L&&(i.warn(J.eventWithoutContext()),L=!1)))}function U(e,t){u.hasListeners(tn.flagDetailChanged)&&u.onFlagChanged(e.key,B(t))}function G(){u.hasListeners(tn.flagDetailsChanged)&&u.onFlags(Object.entries(x).map(([e,t])=>({key:e,detail:B(t)})).reduce((e,t)=>(e[t.key]=t.detail,e),{}))}function $(e,t,r,n){let o=F.getContext(),i=new Date,a={kind:"feature",key:e,context:o,value:t?t.value:null,variation:t?t.variationIndex:null,default:r,creationDate:i.getTime()},s=x[e];s&&(a.version=s.flagVersion?s.flagVersion:s.version,a.trackEvents=s.trackEvents,a.debugEventsUntilDate=s.debugEventsUntilDate),(n||s&&s.trackReason)&&t&&(a.reason=t.reason),M(a)}function Y(e){return tt(e,!1)?Promise.resolve(e):Promise.reject(new c.LDInvalidUserError(J.invalidContext()))}function z(e,t,r,n,o,i){var a;let s,l;return x&&P.objectHasOwnProperty(x,e)&&x[e]&&!x[e].deleted?(s=B(l=x[e]),null!==l.value&&void 0!==l.value||(s.value=t)):s={value:t,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}},r&&(o||l?.prerequisites?.forEach(e=>{z(e,void 0,r,!1,!1,!1)}),$(e,s,t,n)),!o&&i&&(a=s,u.hasListeners(tn.flagUsed)&&u.onFlagUsed(e,a,F.getContext())),s}function B(e){return{value:e.value,variationIndex:void 0===e.variation?null:e.variation,reason:e.reason||null}}function K(){if(D=!0,!F.getContext())return;let e=e=>{try{return JSON.parse(e)}catch(e){return void a.maybeReportError(new c.LDInvalidDataError(J.invalidData()))}};w.connect(F.getContext(),v,{ping:function(){i.debug(J.debugStreamPing());let e=F.getContext();k.fetchFlagSettings(e,v).then(t=>{P.deepEquals(e,F.getContext())&&q(t||{})}).catch(e=>{a.maybeReportError(new c.LDFlagFetchError(J.errorFetchingFlags(e)))})},put:function(t){let r=e(t.data);r&&(i.debug(J.debugStreamPut()),q(r))},patch:function(t){let r=e(t.data);if(!r)return;let n=x[r.key];if(n&&n.version&&r.version&&!(n.version<r.version))i.debug(J.debugStreamPatchIgnored(r.key));else{i.debug(J.debugStreamPatch(r.key));let e={},t=P.extend({},r);delete t.key,x[r.key]=t;let o=B(t);e[r.key]=n?{previous:n.value,current:o}:{current:o},U(r,t),X(e)}},delete:function(t){let r=e(t.data);if(r){if(!x[r.key]||x[r.key].version<r.version){i.debug(J.debugStreamDelete(r.key));let e={};x[r.key]&&!x[r.key].deleted&&(e[r.key]={previous:x[r.key].value}),x[r.key]={version:r.version,deleted:!0},U(r,x[r.key]),X(e)}else i.debug(J.debugStreamDeleteIgnored(r.key))}}})}function W(){D&&(w.disconnect(),D=!1)}function q(e){let t={};if(!e)return Promise.resolve();for(let r in x)P.objectHasOwnProperty(x,r)&&x[r]&&(e[r]&&!P.deepEquals(e[r].value,x[r].value)?t[r]={previous:x[r].value,current:B(e[r])}:e[r]&&!e[r].deleted||(t[r]={previous:x[r].value}));for(let r in e)P.objectHasOwnProperty(e,r)&&e[r]&&(!x[r]||x[r].deleted)&&(t[r]={current:B(e[r])});return x={...e},G(),X(t).catch(()=>{})}function X(e){let t=Object.keys(e);if(t.length>0){let r={};t.forEach(t=>{let n=e[t].current,o=n?n.value:void 0,i=e[t].previous;a.emit(tl+":"+t,o,i),r[t]=n?{current:o,previous:i}:{previous:i}}),a.emit(tl,r),a.emit(tu,x),l.sendEventsOnlyForVariation||j||t.forEach(t=>{$(t,e[t].current)})}return A&&V?V.saveFlags(x):Promise.resolve()}function Q(){let e=T||S&&void 0===T;e&&!D?K():!e&&D&&W(),_&&_.setStreaming(e)}function Z(e){return e===tl||e.substr(0,7)===tl+":"}if("string"==typeof l.bootstrap&&"LOCALSTORAGE"===l.bootstrap.toUpperCase()&&(V?A=!0:i.warn(J.localStorageUnavailable())),"object"==typeof l.bootstrap&&(x=function(e){let t=Object.keys(e),r="$flagsState",n="$valid",o=e[r];!o&&t.length&&i.warn(J.bootstrapOldFormat()),!1===e[n]&&i.warn(J.bootstrapInvalid());let a={};return t.forEach(t=>{if(t!==r&&t!==n){let r={value:e[t]};o&&o[t]?r=P.extend(r,o[t]):r.version=0,a[t]=r}}),a}(l.bootstrap)),j){let e=j.getInitialState();e?ee(e):j.on("init",ee),j.on("update",function(e){e.context&&F.setContext(e.context),e.flags&&q(e.flags)})}else{let r;(e?H.processContext(t).then(Y).then(e=>(r=P.once(m.identify(e,void 0)),e)).then(e=>(r?.({status:"completed"}),F.setContext(e),"object"==typeof l.bootstrap?et():A?V.loadFlags().then(e=>null==e?(x={},k.fetchFlagSettings(F.getContext(),v).then(e=>q(e||{})).then(et).catch(e=>{er(new c.LDFlagFetchError(J.errorFetchingFlags(e)))})):(x=e,P.onNextTick(et),k.fetchFlagSettings(F.getContext(),v).then(e=>q(e)).catch(e=>a.maybeReportError(e)))):k.fetchFlagSettings(F.getContext(),v).then(e=>{x=e||{},G(),et()}).catch(e=>{x={},er(e)}))).catch(e=>{throw r?.({status:"error"}),e}):Promise.reject(new c.LDInvalidEnvironmentIdError(J.environmentNotSpecified()))).catch(er)}function ee(e){h=e.environment,F.setContext(e.context),x={...e.flags},P.onNextTick(et)}function et(){i.info(J.clientInitialized()),I=!0,Q(),s.signalSuccess()}function er(e){s.signalFailure(e)}let eo={waitForInitialization:function(e){if(null!=e){if("number"==typeof e)return function(e){e>5&&i.warn("The waitForInitialization function was called with a timeout greater than 5 seconds. We recommend a timeout of 5 seconds or less.");let t=s.getInitializationPromise();return Promise.race([new Promise((t,r)=>{setTimeout(()=>{r(new e5(`waitForInitialization timed out after ${e} seconds.`))},1e3*e)}),t]).catch(e=>{throw e instanceof c.LDTimeoutError&&i.error(`waitForInitialization error: ${e}`),e})}(e);i.warn("The waitForInitialization method was provided with a non-numeric timeout.")}return i.warn("The waitForInitialization function was called without a timeout specified. In a future version a default timeout will be applied."),s.getInitializationPromise()},waitUntilReady:()=>s.getReadyPromise(),identify:function(e,t,r){let n;if(N)return P.wrapPromiseCallback(Promise.resolve({}),r);if(j)return i.warn(J.identifyDisabled()),P.wrapPromiseCallback(Promise.resolve(P.transformVersionedValuesToValues(x)),r);let o=A&&V?V.clearFlags():Promise.resolve();return P.wrapPromiseCallback(o.then(()=>H.processContext(e)).then(Y).then(e=>(n=P.once(m.identify(e,void 0)),e)).then(e=>k.fetchFlagSettings(e,t).then(r=>{let n=P.transformVersionedValuesToValues(r);return F.setContext(e),v=t,r?q(r).then(()=>n):n})).then(e=>(n?.({status:"completed"}),D&&K(),e)).catch(e=>(n?.({status:"error"}),a.maybeReportError(e),Promise.reject(e))),r)},getContext:function(){return F.getContext()},variation:function(e,t){let{value:r}=m.withEvaluation(e,F.getContext(),t,()=>z(e,t,!0,!1,!1,!0));return r},variationDetail:function(e,t){return m.withEvaluation(e,F.getContext(),t,()=>z(e,t,!0,!0,!1,!0))},track:function(e,t,r){if("string"!=typeof e)return void a.maybeReportError(new c.LDInvalidEventKeyError(J.unknownCustomEventKey(e)));void 0!==r&&"number"!=typeof r&&i.warn(J.invalidMetricValue(typeof r)),n.customEventFilter&&!n.customEventFilter(e)&&i.warn(J.unknownCustomEventKey(e));let o=F.getContext(),s={kind:"custom",key:e,context:o,url:n.getCurrentUrl(),creationDate:(new Date).getTime()};o&&o.anonymous&&(s.contextKind=o.anonymous?"anonymousUser":"user"),null!=t&&(s.data=t),null!=r&&(s.metricValue=r),M(s),m.afterTrack({context:o,key:e,data:t,metricValue:r})},on:function(e,t,r){Z(e)?(S=!0,I&&Q(),a.on(e,t,r)):a.on(...arguments)},off:function(e){if(a.off(...arguments),Z(e)){let e=!1;a.getEvents().forEach(t=>{Z(t)&&a.getEventListenerCount(t)>0&&(e=!0)}),e||(S=!1,D&&void 0===T&&W())}},setStreaming:function(e){let t=null===e?void 0:e;t!==T&&(T=t,Q())},flush:function(e){return P.wrapPromiseCallback(d?C.flush():Promise.resolve(),e)},allFlags:function(){let e={};if(!x)return e;for(let t in x)P.objectHasOwnProperty(x,t)&&!x[t].deleted&&(e[t]=z(t,null,!l.sendEventsOnlyForVariation,!1,!0,!1).value);return e},close:function(e){if(N)return P.wrapPromiseCallback(Promise.resolve(),e);let t=()=>{N=!0,x={}},r=Promise.resolve().then(()=>{if(W(),_&&_.stop(),d)return C.stop(),C.flush()}).then(t).catch(t);return P.wrapPromiseCallback(r,e)},addHook:function(e){m.addHook(e)}};return ta(i,g,eo,f),{client:eo,options:l,emitter:a,ident:F,logger:i,requestor:k,start:function(){d&&(_&&_.start(),C.start())},enqueueEvent:M,getFlagsInternal:function(){return x},getEnvironmentId:()=>h,internalChangeEventName:tu}};function td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?td(Object(r),!0).forEach(function(t){!function(e,t,r){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):td(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tv={promise:Promise.resolve({status:200,header:function(){return null},body:null})},tf=e=>{if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};function tg(e,t){for(var r={},n=null,o=[],i=0;i<e.length;i++)for(var a=e[i],s=a.urls||[],l=0;l<s.length;l++)if(function(e,t,r,n){var o,i,a=(("substring"===e.kind||"regex"===e.kind)&&n.includes("/")?t:t.replace(n,"")).replace(r,"");switch(e.kind){case"exact":i=t,o=RegExp("^"+tf(e.url)+"/?$");break;case"canonical":i=a,o=RegExp("^"+tf(e.url)+"/?$");break;case"substring":i=a,o=RegExp(".*"+tf(e.substring)+".*$");break;case"regex":i=a,o=new RegExp(e.pattern);break;default:return!1}return o.test(i)}(s[l],window.location.href,window.location.search,window.location.hash)){"pageview"===a.kind?t("pageview",a):(o.push(a),t("click_pageview",a));break}return o.length>0&&(n=function(e){for(var r=function(e,t){for(var r=[],n=0;n<t.length;n++)for(var o=e.target,i=t[n],a=i.selector,s=document.querySelectorAll(a);o&&s.length>0;){for(var l=0;l<s.length;l++)o===s[l]&&r.push(i);o=o.parentNode}return r}(e,o),n=0;n<r.length;n++)t("click",r[n])},document.addEventListener("click",n)),r.dispose=function(){document.removeEventListener("click",n)},r}var tp="goalsReady",tm={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function tE(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=function(e){var t,r={userAgentHeaderName:"X-LaunchDarkly-User-Agent",synchronousFlush:!1};if(window.XMLHttpRequest){var n=e&&e.disableSyncEventPost;r.httpRequest=function(e,t,o,i){var a=!n&r.synchronousFlush;return r.synchronousFlush=!1,function(e,t,r,n,o){if(o&&!function(){var e=window.navigator&&window.navigator.userAgent;if(e){var t=e.match(/Chrom(e|ium)\/([0-9]+)\./);if(t)return 73>parseInt(t[2],10)}return!0}())return tv;var i,a=new window.XMLHttpRequest;for(var s in a.open(e,t,!o),r||{})Object.prototype.hasOwnProperty.call(r,s)&&a.setRequestHeader(s,r[s]);if(o){try{a.send(n)}catch(e){}return tv}return{promise:new Promise(function(e,t){a.addEventListener("load",function(){i||e({status:a.status,header:function(e){return a.getResponseHeader(e)},body:a.responseText})}),a.addEventListener("error",function(){i||t(Error())}),a.send(n)}),cancel:function(){i=!0,a.abort()}}}(e,t,o,i,a)}}r.httpAllowsPost=function(){return void 0===t&&(t=!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest),t},r.httpFallbackPing=function(e){(new window.Image).src=e};var o,i=e&&e.eventUrlTransformer;r.getCurrentUrl=function(){return i?i(window.location.href):window.location.href},r.isDoNotTrack=function(){var e;return 1===(e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack)||!0===e||"1"===e||"yes"===e};try{window.localStorage&&(r.localStorage={get:function(e){return new Promise(function(t){t(window.localStorage.getItem(e))})},set:function(e,t){return new Promise(function(r){window.localStorage.setItem(e,t),r()})},clear:function(e){return new Promise(function(t){window.localStorage.removeItem(e),t()})}})}catch(e){r.localStorage=null}return e&&e.useReport&&"function"==typeof window.EventSourcePolyfill&&window.EventSourcePolyfill.supportedOptions&&window.EventSourcePolyfill.supportedOptions.method?(r.eventSourceAllowsReport=!0,o=window.EventSourcePolyfill):(r.eventSourceAllowsReport=!1,o=window.EventSource),window.EventSource&&(r.eventSourceFactory=function(e,t){var r=th(th({},{heartbeatTimeout:3e5,silentTimeout:3e5,skipDefaultHeaders:!0}),t);return new o(e,r)},r.eventSourceIsActive=function(e){return e.readyState===window.EventSource.OPEN||e.readyState===window.EventSource.CONNECTING}),r.userAgent="JSClient",r.version="3.8.1",r.diagnosticSdkData={name:"js-client-sdk",version:"3.8.1"},r.diagnosticPlatformData={name:"JS"},r.diagnosticUseCombinedEvent=!0,r}(r),o=tc(e,t,r,n,tm),i=o.client,a=o.options,s=o.emitter,l=new Promise(function(e){var t=s.on(tp,function(){s.off(tp,t),e()})});i.waitUntilGoalsReady=function(){return l},a.fetchGoals?function(e,t){var r,n;function o(){n&&n.dispose(),r&&r.length&&(n=tg(r,i))}function i(t,r){var n=e.ident.getContext(),o={kind:t,key:r.key,data:null,url:window.location.href,creationDate:(new Date).getTime(),context:n};return"click"===t&&(o.selector=r.selector),e.enqueueEvent(o)}return e.requestor.fetchJSON("/sdk/goals/"+e.getEnvironmentId()).then(function(e){e&&e.length>0&&(n=tg(r=e,i),function(e,t){var r,n=window.location.href;function o(){(r=window.location.href)!==n&&(n=r,t())}(function e(t,r){t(),setTimeout(function(){e(t,r)},r)})(o,300),window.history&&window.history.pushState?window.addEventListener("popstate",o):window.addEventListener("hashchange",o)}(0,o)),t()}).catch(function(r){e.emitter.maybeReportError(new c.LDUnexpectedResponseError((r&&r.message,r.message))),t()}),{}}(o,function(){return s.emit(tp)}):s.emit(tp),"complete"!==document.readyState?window.addEventListener("load",o.start):o.start();var u=function(){n.synchronousFlush=!0,i.flush().catch(function(){}),n.synchronousFlush=!1};return document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&u()}),window.addEventListener("pagehide",u),i}var ty=function(e){return te(th({destination:console.log},e))},tO=void 0,tb="3.8.1",tR={initialize:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console&&console.warn&&console.warn(J.deprecated("default export","named LDClient export")),tE(e,t,r)},version:tb}},35215:function(e,t,r){e=r.nmd(e);var n,o,i,a="[object Map]",s="[object Promise]",l="[object Set]",u="[object WeakMap]",c="[object DataView]",d=/^\[object .+?Constructor\]$/,h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,v="object"==typeof self&&self&&self.Object===Object&&self,f=h||v||Function("return this")(),g=t&&!t.nodeType&&t,p=g&&e&&!e.nodeType&&e,m=p&&p.exports===g,E=Function.prototype,y=Object.prototype,O=f["__core-js_shared__"],b=(n=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",R=E.toString,_=y.hasOwnProperty,P=y.toString,w=RegExp("^"+R.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=m?f.Buffer:void 0,k=y.propertyIsEnumerable,A=C?C.isBuffer:void 0,D=(o=Object.keys,i=Object,function(e){return o(i(e))}),S=U(f,"DataView"),x=U(f,"Map"),T=U(f,"Promise"),I=U(f,"Set"),N=U(f,"WeakMap"),L=!k.call({valueOf:1},"valueOf"),j=$(S),F=$(x),H=$(T),V=$(I),M=$(N);function U(e,t){var r=null==e?void 0:e[t];return!(!W(r)||b&&b in r)&&(K(r)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(r)?w:d).test($(r))?r:void 0}var G=function(e){return P.call(e)};function $(e){if(null!=e){try{return R.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(S&&G(new S(new ArrayBuffer(1)))!=c||x&&G(new x)!=a||T&&G(T.resolve())!=s||I&&G(new I)!=l||N&&G(new N)!=u)&&(G=function(e){var t=P.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?$(r):void 0;if(n)switch(n){case j:return c;case F:return a;case H:return s;case V:return l;case M:return u}return t});var Y=Array.isArray;function z(e){var t;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=9007199254740991&&!K(e)}var B=A||function(){return!1};function K(e){var t=W(e)?P.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function W(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){if(z(e)&&(Y(e)||"string"==typeof e||"function"==typeof e.splice||B(e)||e&&"object"==typeof e&&z(e)&&_.call(e,"callee")&&(!k.call(e,"callee")||"[object Arguments]"==P.call(e))))return!e.length;var t,r=G(e);if(r==a||r==l)return!e.size;if(L||(t=e&&e.constructor,e===("function"==typeof t&&t.prototype||y)))return!D(e).length;for(var n in e)if(_.call(e,n))return!1;return!0}}}]);