ettingsPage.jsx\n  init_injected_globals();\n  var import_react69 = __toESM(require_react());\n\n  // virtual:/apps/web/src/components/ProfileSettings.jsx\n  init_injected_globals();\n  var import_react64 = __toESM(require_react());\n  var import_lucide_react22 = __toESM(require_lucide_react());\n  function ProfileSettings() {\n    const { data: sessionUser, loading: sessionLoading } = useUser_default();\n    const [upload, { loading: uploading }] = useUpload_default();\n    const queryClient2 = useQueryClient();\n    const [displayName, setDisplayName] = (0, import_react64.useState)(\"\");\n    const [profileImage, setProfileImage] = (0, import_react64.useState)(\"\");\n    const [whatsappNumber, setWhatsappNumber] = (0, import_react64.useState)(\"\");\n    const [success, setSuccess] = (0, import_react64.useState)(false);\n    const [error, setError] = (0, import_react64.useState)(null);\n    const { data: profileData, isLoading: profileLoading } = useQuery({\n      queryKey: [\"user-profile\"],\n      queryFn: async () =\u003e {\n        const response = await fetch(\"/api/user/profile\");\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch profile\");\n        }\n        const data = await response.json();\n        return data.user;\n      },\n      enabled: !!sessionUser\n    });\n    (0, import_react64.useEffect)(() =\u003e {\n      if (profileData) {\n        setDisplayName(profileData.name || \"\");\n        setProfileImage(profileData.image || \"\");\n        setWhatsappNumber(profileData.whatsapp_number || \"\");\n      }\n    }, [profileData]);\n    const saveMutation = useMutation({\n      mutationFn: async (payload) =\u003e {\n        const response = await fetch(\"/api/user/profile\", {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload)\n        });\n        if (!response.ok) {\n          const data = await response.json();\n          throw new Error(data.error || \"Failed to update profile\");\n        }\n        return response.json();\n      },\n      onSuccess: (data) =\u003e {\n        setSuccess(true);\n        setError(null);\n        queryClient2.setQueryData([\"user-profile\"], data.user);\n        queryClient2.invalidateQueries({ queryKey: [\"user-profile\"] });\n      },\n      onError: (err) =\u003e {\n        console.error(\"Error updating profile:\", err);\n        setError(err.message);\n        setSuccess(false);\n      }\n    });\n    const handleImageUpload = async (e) =\u003e {\n      const file = e.target.files?.[0];\n      if (!file) return;\n      if (file.size \u003e 5 * 1024 * 1024) {\n        setError(\"Image must be less than 5MB\");\n        return;\n      }\n      if (!file.type.startsWith(\"image/\")) {\n        setError(\"Please upload an image file\");\n        return;\n      }\n      setError(null);\n      const result = await upload({ file });\n      if (result.error) {\n        setError(result.error);\n      } else if (result.url) {\n        setProfileImage(result.url);\n      }\n    };\n    const handleSave = async (e) =\u003e {\n      e.preventDefault();\n      setSuccess(false);\n      setError(null);\n      saveMutation.mutate({\n        name: displayName,\n        image: profileImage,\n        whatsapp_number: whatsappNumber\n      });\n    };\n    const loading = sessionLoading || profileLoading;\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200 p-6\" }, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-600\" }, \"Loading profile...\"));\n    }\n    const hasChanges = displayName !== (profileData?.name || \"\") || profileImage !== (profileData?.image || \"\") || whatsappNumber !== (profileData?.whatsapp_number || \"\");\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-200\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-lg font-semibold text-gray-900\" }, \"Profile\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-gray-500 mt-1\" }, \"Update your personal information and profile picture\")), /* @__PURE__ */ React.createElement(\"form\", { onSubmit: handleSave, className: \"p-6 space-y-6\" }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-3\" }, \"Profile Picture\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-6\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-24 h-24 rounded-full bg-[#F4E4D7] overflow-hidden flex items-center justify-center\" }, profileImage ? /* @__PURE__ */ React.createElement(\n      \"img\",\n      {\n        src: profileImage,\n        alt: \"Profile\",\n        className: \"w-full h-full object-cover\"\n      }\n    ) : /* @__PURE__ */ React.createElement(import_lucide_react22.User, { size: 40, className: \"text-gray-400\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n      \"label\",\n      {\n        htmlFor: \"profile-image\",\n        className: \"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium cursor-pointer\"\n      },\n      /* @__PURE__ */ React.createElement(import_lucide_react22.Upload, { size: 16 }),\n      uploading ? \"Uploading...\" : \"Upload Photo\"\n    ), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        id: \"profile-image\",\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleImageUpload,\n        disabled: uploading,\n        className: \"hidden\"\n      }\n    ), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xs text-gray-500 mt-2\" }, \"JPG, PNG or GIF. Max size 5MB.\")))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n      \"label\",\n      {\n        htmlFor: \"display-name\",\n        className: \"block text-sm font-medium text-gray-700 mb-2\"\n      },\n      \"Display Name\"\n    ), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        id: \"display-name\",\n        type: \"text\",\n        value: displayName,\n        onChange: (e) =\u003e {\n          setDisplayName(e.target.value);\n          setSuccess(false);\n        },\n        placeholder: \"Enter your name\",\n        className: \"w-full max-w-md px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\"\n      }\n    )), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Email Address\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"email\",\n        value: profileData?.email || \"\",\n        disabled: true,\n        className: \"w-full max-w-md px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed\"\n      }\n    ), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xs text-gray-500 mt-2\" }, \"Email address cannot be changed\")), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n      \"label\",\n      {\n        htmlFor: \"whatsapp-number\",\n        className: \"block text-sm font-medium text-gray-700 mb-2\"\n      },\n      \"WhatsApp Number\"\n    ), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        id: \"whatsapp-number\",\n        type: \"tel\",\n        value: whatsappNumber,\n        onChange: (e) =\u003e {\n          setWhatsappNumber(e.target.value);\n          setSuccess(false);\n        },\n        placeholder: \"+1234567890\",\n        className: \"w-full max-w-md px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\"\n      }\n    ), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xs text-gray-500 mt-2\" }, \"Use international format (e.g. +1234567890) to receive ad notifications via WhatsApp\")), error \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"rounded-lg bg-red-50 border border-red-200 p-3 text-sm text-red-600\" }, error), success \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"rounded-lg bg-green-50 border border-green-200 p-3 text-sm text-green-600 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(import_lucide_react22.Check, { size: 16 }), \"Profile updated successfully! Your WhatsApp number has been saved.\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3 pt-4\" }, /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        type: \"submit\",\n        disabled: saveMutation.isPending || !hasChanges,\n        className: \"px-6 py-2.5 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n      },\n      saveMutation.isPending ? \"Saving...\" : \"Save Changes\"\n    ), hasChanges \u0026\u0026 !saveMutation.isPending \u0026\u0026 /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-500\" }, \"You have unsaved changes\"))));\n  }\n\n  // virtual:/apps/web/src/components/TeamSettings.jsx\n  init_injected_globals();\n  var import_react65 = __toESM(require_react());\n  var import_lucide_react23 = __toESM(require_lucide_react());\n  function TeamSettings() {\n    const [members, setMembers] = (0, import_react65.useState)([]);\n    const [loading, setLoading] = (0, import_react65.useState)(true);\n    const [showAddModal, setShowAddModal] = (0, import_react65.useState)(false);\n    const [newMemberEmail, setNewMemberEmail] = (0, import_react65.useState)(\"\");\n    const [newMemberName, setNewMemberName] = (0, import_react65.useState)(\"\");\n    const [newMemberPassword, setNewMemberPassword] = (0, import_react65.useState)(\"\");\n    const [adding, setAdding] = (0, import_react65.useState)(false);\n    const [error, setError] = (0, import_react65.useState)(null);\n    const { modalState, showAlert, showConfirm } = useModal();\n    (0, import_react65.useEffect)(() =\u003e {\n      fetchMembers();\n    }, []);\n    const fetchMembers = async () =\u003e {\n      try {\n        const response = await fetch(\"/api/admin/members\");\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch members\");\n        }\n        const data = await response.json();\n        setMembers(data.members || []);\n      } catch (error2) {\n        console.error(\"Error fetching members:\", error2);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const handleAddMember = async (e) =\u003e {\n      e.preventDefault();\n      setAdding(true);\n      setError(null);\n      try {\n        const response = await fetch(\"/api/admin/members\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            email: newMemberEmail,\n            password: newMemberPassword,\n            name: newMemberName,\n            role: \"admin\"\n          })\n        });\n        if (!response.ok) {\n          const data = await response.json();\n          throw new Error(data.error || \"Failed to add member\");\n        }\n        setNewMemberEmail(\"\");\n        setNewMemberName(\"\");\n        setNewMemberPassword(\"\");\n        setShowAddModal(false);\n        fetchMembers();\n      } catch (error2) {\n        console.error(\"Error adding member:\", error2);\n        setError(error2.message);\n      } finally {\n        setAdding(false);\n      }\n    };\n    const handleRemoveMember = async (memberId) =\u003e {\n      const confirmed = await showConfirm({\n        title: \"Remove Team Member\",\n        message: \"Are you sure you want to remove this team member?\",\n        confirmText: \"Remove\",\n        cancelText: \"Cancel\",\n        variant: \"danger\"\n      });\n      if (!confirmed) return;\n      try {\n        const response = await fetch(`/api/admin/members/${memberId}`, {\n          method: \"DELETE\"\n        });\n        if (!response.ok) {\n          throw new Error(\"Failed to remove member\");\n        }\n        fetchMembers();\n      } catch (error2) {\n        console.error(\"Error removing member:\", error2);\n        await showAlert({\n          title: \"Error\",\n          message: \"Failed to remove member. Please try again.\",\n          variant: \"danger\"\n        });\n      }\n    };\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200 p-6\" }, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-600\" }, \"Loading team members...\"));\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, modalState.type === \"alert\" \u0026\u0026 /* @__PURE__ */ React.createElement(AlertModal, { ...modalState.props, isOpen: modalState.isOpen }), modalState.type === \"confirm\" \u0026\u0026 /* @__PURE__ */ React.createElement(ConfirmModal, { ...modalState.props, isOpen: modalState.isOpen }), /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg border border-gray-200\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-200 flex items-center justify-between\" }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-lg font-semibold text-gray-900\" }, \"Team Members\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-gray-500 mt-1\" }, \"Manage who has access to your ads manager\")), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: () =\u003e setShowAddModal(true),\n        className: \"flex items-center gap-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium\"\n      },\n      /* @__PURE__ */ React.createElement(import_lucide_react23.Plus, { size: 16 }),\n      \"Add Member\"\n    )), /* @__PURE__ */ React.createElement(\"div\", { className: \"divide-y divide-gray-200\" }, members.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 text-center text-gray-500\" }, /* @__PURE__ */ React.createElement(\"p\", null, \"No team members yet. Add your first member to get started.\")) : members.map((member) =\u003e /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        key: member.id,\n        className: \"p-6 flex items-center justify-between hover:bg-gray-50 transition-colors\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center\" }, member.image ? /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: member.image,\n          alt: member.name,\n          className: \"w-full h-full rounded-full object-cover\"\n        }\n      ) : /* @__PURE__ */ React.createElement(import_lucide_react23.User, { size: 20, className: \"text-gray-500\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm font-medium text-gray-900\" }, member.name || \"No name\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-gray-500\" }, member.email))),\n      /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full\" }, member.role === \"admin\" \u0026\u0026 /* @__PURE__ */ React.createElement(import_lucide_react23.Crown, { size: 14, className: \"text-yellow-600\" }), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-medium text-gray-700 capitalize\" }, member.role)), /* @__PURE__ */ React.createElement(\n        \"button\",\n        {\n          onClick: () =\u003e handleRemoveMember(member.id),\n          className: \"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n        },\n        /* @__PURE__ */ React.createElement(import_lucide_react23.X, { size: 16 })\n      ))\n    ))), showAddModal \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-2xl max-w-md w-full p-6\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-semibold text-gray-900 mb-4\" }, \"Add Team Member\"), /* @__PURE__ */ React.createElement(\"form\", { onSubmit: handleAddMember, className: \"space-y-4\" }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Full Name\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"text\",\n        value: newMemberName,\n        onChange: (e) =\u003e setNewMemberName(e.target.value),\n        placeholder: \"John Doe\",\n        className: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\",\n        required: true\n      }\n    )), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Email Address\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"email\",\n        value: newMemberEmail,\n        onChange: (e) =\u003e setNewMemberEmail(e.target.value),\n        placeholder: \"member@example.com\",\n        className: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\",\n        required: true\n      }\n    )), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Password\"), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"password\",\n        value: newMemberPassword,\n        onChange: (e) =\u003e setNewMemberPassword(e.target.value),\n        placeholder: \"Create a secure password\",\n        className: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900\",\n        required: true,\n        minLength: 6\n      }\n    ), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xs text-gray-500 mt-2\" }, \"This will create a new admin account with these credentials.\")), error \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"rounded-lg bg-red-50 border border-red-200 p-3 text-sm text-red-600\" }, error), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-3\" }, /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        type: \"button\",\n        onClick: () =\u003e {\n          setShowAddModal(false);\n          setNewMemberEmail(\"\");\n          setNewMemberName(\"\");\n          setNewMemberPassword(\"\");\n          setError(null);\n        },\n        className: \"flex-1 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\n      },\n      \"Cancel\"\n    ), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        type: \"submit\",\n        disabled: adding,\n        className: \"flex-1 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium disabled:opacity-50\"\n      },\n      adding ? \"Adding...\" : \"Add Member\"\n    )))))));\n  }\n\n  // virtual:/apps/web/src/components/NotificationSettings.jsx\n  init_injected_globals();\n  var import_react66 = __toESM(require_react());\n  var import_lucide_react24 = __toESM(require_lucide_react());\n  function NotificationSettings() {\n    const [loading, setLoading] = (0, import_react66.useState)(true);\n    const [saving, setSaving] = (0, import_react66.useState)(false);\n    const [sendingTest, setSendingTest] = (0, import_react66.useState)(false);\n    const [checkingReminders, setCheckingReminders] = (0, import_react66.useState)(false);\n    const [testMessage, setTestMessage] = (0, import_react66.useState)(null);\n    const [reminderResults, setReminderResults] = (0, import_react66.useState)(null);\n    const [settingUpWebhook, setSettingUpWebhook] = (0, import_react66.useState)(false);\n    const [webhookStatus, setWebhookStatus] = (0, import_react66.useState)(null);\n    const [preferences, setPreferences] = (0, import_react66.useState)({\n      email_enabled: true,\n      sms_enabled: false,\n      telegram_enabled: false,\n      reminder_time_value: 1,\n      reminder_time_unit: \"hours\",\n      email_address: \"\",\n      phone_number: \"\",\n      sound_enabled: true\n    });\n    const [chatIds, setChatIds] = (0, import_react66.useState)([]);\n    const [loadingChatIds, setLoadingChatIds] = (0, import_react66.useState)(true);\n    const [newLabel, setNewLabel] = (0, import_react66.useState)(\"\");\n    const [newChatId, setNewChatId] = (0, import_react66.useState)(\"\");\n    const [addingChatId, setAddingChatId] = (0, import_react66.useState)(false);\n    const [sendingTestTelegram, setSendingTestTelegram] = (0, import_react66.useState)(null);\n    (0, import_react66.useEffect)(() =\u003e {\n      fetchPreferences();\n      fetchChatIds
