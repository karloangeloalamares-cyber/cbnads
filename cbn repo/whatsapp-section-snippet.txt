eviewModal \u0026\u0026 selectedAd \u0026\u0026 /* @__PURE__ */ React.createElement(\n      AdPreviewModal,\n      {\n        ad: selectedAd,\n        onClose: () =\u003e {\n          setShowPreviewModal(false);\n          setSelectedAd(null);\n        },\n        onEdit: (ad) =\u003e {\n          setShowPreviewModal(false);\n          setSelectedAd(null);\n        }\n      }\n    ));\n  }\n\n  // virtual:/apps/web/src/components/WhatsAppMessages.jsx\n  init_injected_globals();\n  var import_react83 = __toESM(require_react());\n  var import_lucide_react42 = __toESM(require_lucide_react());\n  function WhatsAppMessages() {\n    const [messages, setMessages] = (0, import_react83.useState)([]);\n    const [loading, setLoading] = (0, import_react83.useState)(true);\n    const [unreadCount, setUnreadCount] = (0, import_react83.useState)(0);\n    const [filterUnread, setFilterUnread] = (0, import_react83.useState)(false);\n    const [searchTerm, setSearchTerm] = (0, import_react83.useState)(\"\");\n    const [selectedMessage, setSelectedMessage] = (0, import_react83.useState)(null);\n    (0, import_react83.useEffect)(() =\u003e {\n      fetchMessages();\n    }, [filterUnread]);\n    const fetchMessages = async () =\u003e {\n      try {\n        setLoading(true);\n        const params = new URLSearchParams();\n        if (filterUnread) params.set(\"unread\", \"true\");\n        const response = await fetch(`/api/whatsapp/messages?${params}`);\n        const data = await response.json();\n        if (response.ok) {\n          setMessages(data.messages);\n          setUnreadCount(data.unreadCount);\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch messages:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const markAsRead = async (messageId) =\u003e {\n      try {\n        const response = await fetch(\"/api/whatsapp/messages\", {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ messageIds: [messageId] })\n        });\n        if (response.ok) {\n          setMessages(\n            messages.map(\n              (m) =\u003e m.id === messageId ? { ...m, is_read: true } : m\n            )\n          );\n          setUnreadCount((prev) =\u003e Math.max(0, prev - 1));\n        }\n      } catch (error) {\n        console.error(\"Failed to mark as read:\", error);\n      }\n    };\n    const markAsReplied = async (messageId) =\u003e {\n      try {\n        const response = await fetch(`/api/whatsapp/messages/${messageId}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ replied_to: true, is_read: true })\n        });\n        if (response.ok) {\n          setMessages(\n            messages.map(\n              (m) =\u003e m.id === messageId ? { ...m, replied_to: true, is_read: true } : m\n            )\n          );\n          setUnreadCount((prev) =\u003e Math.max(0, prev - 1));\n        }\n      } catch (error) {\n        console.error(\"Failed to mark as replied:\", error);\n      }\n    };\n    const deleteMessage = async (messageId) =\u003e {\n      if (!confirm(\"Delete this message?\")) return;\n      try {\n        const response = await fetch(`/api/whatsapp/messages/${messageId}`, {\n          method: \"DELETE\"\n        });\n        if (response.ok) {\n          setMessages(messages.filter((m) =\u003e m.id !== messageId));\n          setSelectedMessage(null);\n        }\n      } catch (error) {\n        console.error(\"Failed to delete message:\", error);\n      }\n    };\n    const filteredMessages = messages.filter((m) =\u003e {\n      if (!searchTerm) return true;\n      const search = searchTerm.toLowerCase();\n      return m.message_text?.toLowerCase().includes(search) || m.from_name?.toLowerCase().includes(search) || m.from_number?.includes(search) || m.advertiser_name?.toLowerCase().includes(search);\n    });\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"p-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between\" }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-3xl font-bold text-gray-900 flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(import_lucide_react42.MessageCircle, { className: \"w-8 h-8 text-green-600\" }), \"WhatsApp Messages\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-600 mt-2\" }, \"Incoming messages from advertisers and customers\")), unreadCount \u003e 0 \u0026\u0026 /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-green-100 text-green-800 px-4 py-2 rounded-lg font-semibold\" }, unreadCount, \" unread\")), /* @__PURE__ */ React.createElement(\"div\", { className: \"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-start gap-3\" }, /* @__PURE__ */ React.createElement(import_lucide_react42.ExternalLink, { className: \"w-5 h-5 text-blue-600 mt-0.5\" }), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-semibold text-blue-900\" }, \"Webhook URL\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm text-blue-700 mt-1\" }, \"Configure this URL in WaSenderAPI to receive messages:\"), /* @__PURE__ */ React.createElement(\"code\", { className: \"block mt-2 bg-white px-3 py-2 rounded text-sm text-blue-900 border border-blue-200\" }, typeof window !== \"undefined\" ? window.location.origin : \"\", \"/api/whatsapp/webhook\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-white rounded-lg shadow-sm p-4 mb-6\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-4 items-center flex-wrap\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 min-w-[300px] relative\" }, /* @__PURE__ */ React.createElement(import_lucide_react42.Search, { className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" }), /* @__PURE__ */ React.createElement(\n      \"input\",\n      {\n        type: \"text\",\n        placeholder: \"Search messages, phone numbers, advertisers...\",\n        value: searchTerm,\n        onChange: (e) =\u003e setSearchTerm(e.target.value),\n        className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n      }\n    )), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: () =\u003e setFilterUnread(!filterUnread),\n        className: `px-4 py-2 rounded-lg font-medium transition-colors ${filterUnread ? \"bg-green-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`\n      },\n      \"Unread Only\"\n    ), 
